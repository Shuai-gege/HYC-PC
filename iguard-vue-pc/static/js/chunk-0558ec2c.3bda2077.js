(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0558ec2c"],{"09f4":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),Math.easeInOutQuad=function(t,e,n,r){return t/=r/2,t<1?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e)};var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function a(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function i(t,e,n){var i=o(),u=t-i,s=20,l=0;e="undefined"===typeof e?500:e;var c=function t(){l+=s;var o=Math.easeInOutQuad(l,i,u,e);a(o),l<e?r(t):n&&"function"===typeof n&&n()};c()}},"2e08":function(t,e,n){var r=n("9def"),a=n("9744"),o=n("be13");t.exports=function(t,e,n,i){var u=String(o(t)),s=u.length,l=void 0===n?" ":String(n),c=r(e);if(c<=s||""==l)return u;var d=c-s,p=a.call(l,Math.ceil(d/l.length));return p.length>d&&(p=p.slice(0,d)),i?p+u:u+p}},"555b":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-row",[n("el-col",{attrs:{span:6}},[n("el-date-picker",{attrs:{type:"daterange","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.time},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._v(" "),n("el-col",{attrs:{span:3}},[n("el-select",{attrs:{placeholder:"请选择建筑"},on:{change:t.jianZhu},model:{value:t.location,callback:function(e){t.location=e},expression:"location"}},t._l(t.locationName,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),n("el-col",{attrs:{span:3}},[n("el-select",{attrs:{placeholder:"请选择楼层"},on:{change:t.louCeng},model:{value:t.floor,callback:function(e){t.floor=e},expression:"floor"}},t._l(t.floorId,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),n("el-col",{attrs:{span:3}},[n("el-select",{attrs:{placeholder:"请选择业态"},on:{change:t.yeTaiFun},model:{value:t.yeTai,callback:function(e){t.yeTai=e},expression:"yeTai"}},t._l(t.yeTaiId,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),n("el-col",{attrs:{span:3}},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入商户名/事件编号"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}})],1),t._v(" "),n("el-col",{attrs:{offset:1,span:3}},[n("el-button",{attrs:{type:"primary"},on:{click:t.query}},[t._v("查询")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.excel}},[t._v("导出")])],1)],1),t._v(" "),n("el-divider"),t._v(" "),n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.list,border:"",height:"550"}},[n("el-table-column",{attrs:{width:"50",label:"序号"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.$index+(t.listQuery.page-1)*t.listQuery.pageSize+1))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"shop_name",label:"商户名称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"retail_name",label:"业态类型"}}),t._v(" "),n("el-table-column",{attrs:{prop:"building_name",label:"空间位置",formatter:t.weiZhi}}),t._v(" "),n("el-table-column",{attrs:{prop:"detail_count",label:"任务数",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.order(e)}}},[t._v(t._s(e.row.detail_count))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"report_count",label:"报事数",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.order1(e)}}},[t._v(t._s(e.row.report_count))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"check_unqualified",label:"自检不合格数",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.order2(e)}}},[t._v(t._s(e.row.check_unqualified))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"check_timeout",label:"逾期数",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.order3(e)}}},[t._v(t._s(e.row.check_timeout))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"total_unqualified",label:"不合格任务总数",sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"pass_rate",label:"合格率",formatter:t.heGe,sortable:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"timeout_rate",label:"逾期率",formatter:t.yuQi,sortable:""}})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getList}})],1)],1)},a=[],o=(n("ac6a"),n("96cf"),n("3b8d")),i=(n("f576"),n("bc3a")),u=n.n(i),s=n("6403"),l=n("dea4"),c=n("333d"),d={components:{Pagination:c["a"]},name:"shangHuStatistics",data:function(){return{value:[new Date,new Date],options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],location:"",locationName:[{value:"",label:"建筑（全部）"}],floor:"",floorId:[{value:"",label:"楼层（全部）"}],yeTai:"",yeTaiId:[{value:"",label:"业态（全部）"}],input:"",list:[],listLoading:!0,total:0,yeTaiQuery:{company_id:localStorage.getItem("companyId"),uid:localStorage.getItem("uid"),page:1,pageSize:50},listQuery:{company_id:localStorage.getItem("companyId"),page:1,pageSize:50}}},mounted:function(){this.getList(),this.getListFormatList(),this.companyDept(localStorage.getItem("companyId"));var t=new Date,e=t.getFullYear()+"-"+JSON.stringify(t.getMonth()+1).padStart(2,"0")+"-"+JSON.stringify(t.getDate()).padStart(2,"0");this.listQuery.start_time=e,this.listQuery.end_time=e},methods:{getList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l["d"])(this.listQuery);case 3:e=t.sent,console.log(e),this.list=e.data,this.total=e.count,this.listLoading=!1,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(){return t.apply(this,arguments)}return e}(),time:function(t){var e=new Date(t[0]);this.listQuery.start_time=e.getFullYear()+"-"+JSON.stringify(e.getMonth()+1).padStart(2,"0")+"-"+JSON.stringify(e.getDate()).padStart(2,"0");var n=new Date(t[1]);this.listQuery.end_time=n.getFullYear()+"-"+JSON.stringify(n.getMonth()+1).padStart(2,"0")+"-"+JSON.stringify(n.getDate()).padStart(2,"0")},weiZhi:function(t){return null!=t.building_name&&null!=t.floor_name?t.building_name+"/"+t.floor_name:null!=t.building_name&&null==t.floor_name?t.building_name:void 0},heGe:function(t){return t.pass_rate+"%"},yuQi:function(t){return t.timeout_rate+"%"},jianZhu:function(t){console.log(t),""==t?(this.floorId=[{value:"",label:"楼层（全部）"}],this.listQuery.building_id=""):(this.listQuery.building_id=t,this.getFloor(t))},louCeng:function(t){this.listQuery.floor_id=""==t?"":t},yeTaiFun:function(t){this.listQuery.retail_id=t},ziJian:function(t){this.listQuery.check_status=t},ziJian1:function(t){this.listQuery.check_result=t},fuCha:function(t){this.listQuery.repeat_status=t},fuCha1:function(t){this.listQuery.repeat_result=t},order:function(t){console.log(t);var e=t.row;this.$router.push({name:"shangHuCheck",params:{startTime:this.listQuery.start_time,endTime:this.listQuery.end_time,shop_nam:e.shop_name}})},order1:function(t){console.log(t);var e=t.row;this.$router.push({name:"shangHuCheck",params:{startTime:this.listQuery.start_time,endTime:this.listQuery.end_time,shop_nam:e.shop_name,ziJian_status:"4"}})},order2:function(t){console.log(t);var e=t.row;this.$router.push({name:"shangHuCheck",params:{startTime:this.listQuery.start_time,endTime:this.listQuery.end_time,shop_nam:e.shop_name,ziJian_result:"2"}})},order3:function(t){var e=t.row;this.$router.push({name:"shangHuCheck",params:{startTime:this.listQuery.start_time,endTime:this.listQuery.end_time,shop_nam:e.shop_name,ziJian_status:"3"}})},getListFormatList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l["h"])(this.yeTaiQuery);case 3:e=t.sent,console.log(e),e.data.forEach((function(t){n.yeTaiId.push({value:t.id,label:t.retail_format_name})})),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),companyDept:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["c"])(e);case 3:n=t.sent,n.result.forEach((function(t){r.locationName.push({value:t.id,label:t.locationName})})),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e){return t.apply(this,arguments)}return e}(),getFloor:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["a"])(e);case 3:n=t.sent,n.result.forEach((function(t){r.floorId.push({value:t.id,label:t.locationName})})),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e){return t.apply(this,arguments)}return e}(),query:function(){this.listQuery.shop_name=this.input,this.listLoading=!0,this.getList()},excel:function(){var t=this;this.listLoading=!0,console.log("导出"),u.a.defaults.headers.common["LinkAdmin-Token"]=localStorage.getItem("LinkAdmin-Token");var e=new FormData;for(var n in this.listQuery)e.append(n,this.listQuery[n]);u()({method:"post",url:"http://47.100.240.228:8954/rest/reportCheck/checkStatisticsReportExport",responseType:"blob",data:e}).then((function(e){t.listLoading=!1,console.log(e);var n=new Blob([e.data],{type:"application/vnd.ms -excel"}),r=document.createElement("a");r.href=window.URL.createObjectURL(n),r.download="安全隐患排名-"+t.listQuery.start_time+"~"+t.listQuery.end_time+".xlsx",r.click(),window.URL.revokeObjectURL(r.href)}))}}},p=d,m=(n("6c55"),n("2877")),f=Object(m["a"])(p,r,a,!1,null,"7531bb77",null);e["default"]=f.exports},6403:function(t,e,n){"use strict";n.d(e,"f",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"e",(function(){return u})),n.d(e,"a",(function(){return s})),n.d(e,"d",(function(){return l})),n.d(e,"b",(function(){return c}));var r=n("b775"),a=n("7605");function o(t){return Object(r["a"])({url:"/rest/department/subCompanyList",method:"get",params:{uid:t}})}function i(t){return Object(a["a"])({url:"/rest/buildingLocation/getCompanyDeptByCompanyId",method:"get",params:{company_id:t}})}function u(t){return Object(r["a"])({url:"/rest/tbEventReport/getPCReportEventDetailByPage",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/rest/buildingLocation/getBuildingLocationFloor",method:"get",params:{parentId:t}})}function l(t){return Object(r["a"])({url:"/rest/tbEventTypeConfig/list",method:"post",data:t})}function c(t){return Object(r["a"])({url:"/rest/department/getCompanyByUid",method:"get",params:{uid:t}})}},"6c55":function(t,e,n){"use strict";var r=n("ec39"),a=n.n(r);a.a},9744:function(t,e,n){"use strict";var r=n("4588"),a=n("be13");t.exports=function(t){var e=String(a(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},dea4:function(t,e,n){"use strict";var r=n("bc3a"),a=n.n(r),o=n("5c96"),i=n("4360"),u=n("5f87"),s=a.a.create({baseURL:"http://47.100.240.228:8954",timeout:3e5,responseType:"json"});s.interceptors.request.use((function(t){return i["a"].getters.token&&(t.headers["LinkAdmin-Token"]=Object(u["a"])()),t}),(function(t){return console.log(t),Promise.reject(t)})),s.interceptors.response.use((function(t){var e=t.data;return 200!==e.code?(Object(o["Message"])({message:e.msg||"Error",type:"error",duration:3e3}),50001===e.code&&o["MessageBox"].confirm("你已经退出系统了, 你可以取消停留在这一页, 或者再次登录","提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((function(){i["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(e.msg||"Error"))):e}),(function(t){return console.log("err"+t),Object(o["Message"])({message:t.message,type:"error",duration:3e3}),Promise.reject(t)}));var l=s;function c(t){return l({url:"/rest/shop/add",method:"post",data:t})}function d(t){return l({url:"/rest/shop/edit",method:"post",data:t})}function p(t){return l({url:"/rest/shop/list",method:"post",data:t})}function m(t){return l({url:"/rest/shop/remove",method:"post",data:t})}function f(t){return l({url:"/rest/retailFormat/add",method:"post",data:t})}function h(t){return l({url:"/rest/retailFormat/edit",method:"post",data:t})}function g(t){return l({url:"/rest/retailFormat/list",method:"post",data:t})}function v(t){return l({url:"/rest/retailFormat/remove",method:"post",data:t})}function b(t){return l({url:"/rest/ShopManageManage/add",method:"post",data:t})}function y(t){return l({url:"/rest/ShopManageManage/edit",method:"post",data:t})}function _(t){return l({url:"/rest/ShopManageManage/list",method:"post",data:t})}function k(t){return l({url:"/rest/ShopManageManage/remove",method:"post",data:t})}function w(t){return l({url:"/rest/ShopManageManage/passIf",method:"post",data:t})}function S(t){return l({url:"/rest/checkTask/add",method:"post",data:t})}function T(t){return l({url:"/rest/checkTask/edit",method:"post",data:t})}function Q(t){return l({url:"/rest/checkTask/list",method:"post",data:t})}function x(t){return l({url:"/rest/checkTask/remove",method:"post",data:t})}function O(t){return l({url:"/rest/checkItem/add",method:"post",data:t})}function j(t){return l({url:"/rest/checkItem/edit",method:"post",data:t})}function L(t){return l({url:"/rest/checkItem/list",method:"post",data:t})}function I(t){return l({url:"/rest/checkItem/remove",method:"post",data:t})}function R(t){return l({url:"/rest/checkTask/getGroups",method:"post",data:t})}function M(t){return l({url:"/rest/reportCheck/checkDetailReport",method:"post",data:t})}function C(t){return l({url:"/rest/reportCheck/checkStatisticsReport",method:"post",data:t})}function F(t){return l({url:"/rest/checkTask/getDetailsByParamById",method:"get",params:{detail_id:t}})}n.d(e,"l",(function(){return c})),n.d(e,"u",(function(){return d})),n.d(e,"g",(function(){return p})),n.d(e,"p",(function(){return m})),n.d(e,"m",(function(){return f})),n.d(e,"x",(function(){return h})),n.d(e,"h",(function(){return g})),n.d(e,"s",(function(){return v})),n.d(e,"n",(function(){return b})),n.d(e,"y",(function(){return y})),n.d(e,"i",(function(){return _})),n.d(e,"t",(function(){return k})),n.d(e,"o",(function(){return w})),n.d(e,"b",(function(){return S})),n.d(e,"w",(function(){return T})),n.d(e,"k",(function(){return Q})),n.d(e,"r",(function(){return x})),n.d(e,"a",(function(){return O})),n.d(e,"v",(function(){return j})),n.d(e,"j",(function(){return L})),n.d(e,"q",(function(){return I})),n.d(e,"f",(function(){return R})),n.d(e,"c",(function(){return M})),n.d(e,"d",(function(){return C})),n.d(e,"e",(function(){return F}))},ec39:function(t,e,n){},f576:function(t,e,n){"use strict";var r=n("5ca1"),a=n("2e08"),o=n("a25f"),i=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);r(r.P+r.F*i,"String",{padStart:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0,!0)}})}}]);