(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3257ef64"],{"06cd":function(e,t,i){"use strict";var n=i("bc3a"),r=i.n(n),a=i("5c96"),o=i("4360"),c=i("5f87"),s=r.a.create({baseURL:"http://47.100.240.228:8950",timeout:3e7,responseType:"json"});s.interceptors.request.use((function(e){return o["a"].getters.token&&(e.headers["LinkAdmin-Token"]=Object(c["a"])()),e}),(function(e){return console.log(e),Promise.reject(e)})),s.interceptors.response.use((function(e){var t=e.data;return 2e4!==t.code?(Object(a["Message"])({message:t.msg||"Error",type:"error",duration:3e3}),50001===t.code&&a["MessageBox"].confirm("你已经退出系统了, 你可以取消停留在这一页, 或者再次登录","提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((function(){o["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(t.msg||"Error"))):t}),(function(e){return console.log("err"+e),Object(a["Message"])({message:e.message,type:"error",duration:3e3}),Promise.reject(e)})),t["a"]=s},"09f4":function(e,t,i){"use strict";i.d(t,"a",(function(){return o})),Math.easeInOutQuad=function(e,t,i,n){return e/=n/2,e<1?i/2*e*e+t:(e--,-i/2*(e*(e-2)-1)+t)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function r(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function a(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(e,t,i){var o=a(),c=e-o,s=20,l=0;t="undefined"===typeof t?500:t;var d=function e(){l+=s;var a=Math.easeInOutQuad(l,o,c,t);r(a),l<t?n(e):i&&"function"===typeof i&&i()};d()}},4381:function(e,t,i){"use strict";i("ac4d"),i("8a81"),i("ac6a");var n=i("4360"),r={inserted:function(e,t,i){var r=t.value,a=n["a"].getters&&n["a"].getters.permissions;if(!(r&&r instanceof Array&&r.length>0&&a))throw new Error("need permissions! Like v-permission=\"['/rest/user/list']\"");var o=!1,c=!0,s=!1,l=void 0;try{for(var d,u=a[Symbol.iterator]();!(c=(d=u.next()).done);c=!0){var f=d.value;if(f.url===r[0]){o=!0;break}}}catch(p){s=!0,l=p}finally{try{c||null==u.return||u.return()}finally{if(s)throw l}}o||e.remove()}},a=function(e){e.directive("permission",r)};window.Vue&&(window["permission"]=r,Vue.use(a)),r.install=a;t["a"]=r},"60fc":function(e,t,i){"use strict";var n=i("cdca"),r=i.n(n);r.a},"7be3":function(e,t,i){"use strict";i.d(t,"f",(function(){return a})),i.d(t,"b",(function(){return o})),i.d(t,"h",(function(){return c})),i.d(t,"g",(function(){return s})),i.d(t,"a",(function(){return l})),i.d(t,"i",(function(){return d})),i.d(t,"c",(function(){return u})),i.d(t,"e",(function(){return f})),i.d(t,"d",(function(){return p}));var n=i("b775"),r=i("9702");function a(e){return Object(r["a"])({url:"/rest/deviceInfo/list",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/rest/deviceInfo/addInspectionItemsByDeviceId",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/rest/deviceInfo/getInspectionItemsByDeviceId",method:"get",params:{deviceId:e}})}function s(e){return Object(n["a"])({url:"/rest/deviceInfo/exportQR",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/rest/deviceInfo/addDevice",method:"post",data:e})}function d(e){return Object(r["a"])({url:"/rest/deviceInfo/editDevice",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/rest/deviceInfo/delete",method:"get",params:{id:e}})}function f(e){return Object(n["a"])({url:"/rest/newDeviceCheck/list",method:"post",data:e})}function p(e){return Object(n["a"])({url:"/rest/newDeviceCheck/detailList",method:"post",data:e})}},"814f":function(e,t,i){"use strict";i.d(t,"g",(function(){return a})),i.d(t,"f",(function(){return o})),i.d(t,"d",(function(){return c})),i.d(t,"e",(function(){return s})),i.d(t,"c",(function(){return l})),i.d(t,"b",(function(){return d})),i.d(t,"a",(function(){return u}));var n=i("b775"),r=i("7605");function a(e){return Object(r["a"])({url:"/rest/buildingLocation/list",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/rest/tbBuildingLocation/update",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/rest/buildingLocation/add",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/rest/buildingLocation/removeBuildingById",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/rest/buildingLocation/getCompanyDept",method:"get",params:{uid:e}})}function d(){return Object(n["a"])({url:"/rest/tbBuildingLocation/getCompanyBuildingLocation",method:"get"})}function u(e){return Object(r["a"])({url:"/rest/buildingLocation/getBuildingLocationFloor",method:"get",params:{parentId:e}})}},"866d":function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"c",(function(){return a})),i.d(t,"b",(function(){return o}));var n=i("9702");function r(e){return Object(n["a"])({url:"/rest/inspectionItem/addInspectionItem",method:"post",data:e})}function a(e){return Object(n["a"])({url:"/rest/inspectionItem/list",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/rest/inspectionItem/editInspectionItem",method:"post",data:e})}},9702:function(e,t,i){"use strict";var n=i("bc3a"),r=i.n(n),a=i("5c96"),o=i("4360"),c=i("5f87"),s=r.a.create({baseURL:"http://47.100.240.228:8953",timeout:3e5,responseType:"json"});s.interceptors.request.use((function(e){return o["a"].getters.token&&(e.headers["LinkAdmin-Token"]=Object(c["a"])()),e}),(function(e){return console.log(e),Promise.reject(e)})),s.interceptors.response.use((function(e){var t=e.data;return 2e4!==t.code?(Object(a["Message"])({message:t.msg||"Error",type:"error",duration:3e3}),50001===t.code&&a["MessageBox"].confirm("你已经退出系统了, 你可以取消停留在这一页, 或者再次登录","提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((function(){o["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(t.msg||"Error"))):t}),(function(e){return console.log("err"+e),Object(a["Message"])({message:e.message,type:"error",duration:3e3}),Promise.reject(e)})),t["a"]=s},bd17:function(e,t,i){"use strict";i.d(t,"c",(function(){return o})),i.d(t,"d",(function(){return c})),i.d(t,"b",(function(){return s})),i.d(t,"f",(function(){return l})),i.d(t,"a",(function(){return d})),i.d(t,"k",(function(){return u})),i.d(t,"i",(function(){return f})),i.d(t,"g",(function(){return p})),i.d(t,"j",(function(){return m})),i.d(t,"h",(function(){return h})),i.d(t,"e",(function(){return v}));var n=i("06cd"),r=i("b775"),a=i("7605");function o(e){return Object(r["a"])({url:"/rest/department/getCompanyByUid",method:"get",params:{uid:e}})}function c(e){return Object(a["a"])({url:"/rest/buildingLocation/getCompanyDeptByCompanyId",method:"get",params:{company_id:e}})}function s(e){return Object(a["a"])({url:"/rest/buildingLocation/getBuildingLocationFloor",method:"get",params:{parentId:e}})}function l(e){return Object(n["a"])({url:"/rest/patrolPoint/getPatrolPointList",method:"post",data:e})}function d(e){return Object(n["a"])({url:"/rest/patrolPoint/add",method:"post",data:e})}function u(e,t){return Object(n["a"])({url:"/rest/patrolPoint/stopOrStart",method:"get",params:{id:e,uid:t}})}function f(e,t){return Object(n["a"])({url:"/rest/patrolPoint/remove",method:"get",params:{id:e,uid:t}})}function p(e){return Object(n["a"])({url:"/rest/patrolPoint/modify",method:"post",data:e})}function m(e){return Object(n["a"])({url:"/rest/patrolDefaultConfig/saveOrModify",method:"post",data:e})}function h(e){return Object(n["a"])({url:"/rest/patrolPoint/patrolPointRepeat",method:"post",data:e})}function v(e){return Object(n["a"])({url:"/rest/patrolDefaultConfig/getPatrolPointDefault",method:"get",params:{companyId:e}})}},cdca:function(e,t,i){},eff2:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticStyle:{"margin-top":"20px","margin-bottom":"20px"}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:4}},[i("el-input",{attrs:{placeholder:"名称"},model:{value:e.listQuery.deviceName,callback:function(t){e.$set(e.listQuery,"deviceName",t)},expression:"listQuery.deviceName"}})],1),e._v(" "),i("el-col",{attrs:{span:4}},[i("el-select",{attrs:{placeholder:"建筑",clearable:""},on:{change:e.getFloors},model:{value:e.listQuery.buildingId,callback:function(t){e.$set(e.listQuery,"buildingId",t)},expression:"listQuery.buildingId"}},e._l(e.buildings,(function(e){return i("el-option",{key:e.id,attrs:{label:e.locationName,value:e.id}})})),1)],1),e._v(" "),i("el-col",{attrs:{span:4}},[i("el-select",{attrs:{placeholder:"楼层",clearable:""},model:{value:e.listQuery.floorId,callback:function(t){e.$set(e.listQuery,"floorId",t)},expression:"listQuery.floorId"}},e._l(e.floors,(function(e){return i("el-option",{key:e.id,attrs:{label:e.locationName,value:e.id}})})),1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/rest/deviceInfo/list"],expression:"['/rest/deviceInfo/list']"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("查找")]),e._v(" "),i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/rest/deviceInfo/add"],expression:"['/rest/deviceInfo/add']"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.handleCreate}},[i("i",{staticClass:"el-icon-plus"}),e._v("新增设备\n        ")]),e._v(" "),i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/rest/deviceInfo/exportQR"],expression:"['/rest/deviceInfo/exportQR']"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.handleExportQR}},[e._v("导出二维码")])],1)],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],key:e.tableKey,staticStyle:{width:"100%"},attrs:{data:e.list,border:"",height:"600"}},[i("el-table-column",{attrs:{width:"50",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.$index+(e.listQuery.page-1)*e.listQuery.limit+1))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"deviceName",label:"设备名称"}}),e._v(" "),i("el-table-column",{attrs:{prop:"typeName",label:"类型",formatter:e.formatType}}),e._v(" "),i("el-table-column",{attrs:{prop:"brandName",label:"品牌",formatter:e.formatBrand}}),e._v(" "),i("el-table-column",{attrs:{prop:"deviceModel",label:"型号",formatter:e.formatModel}}),e._v(" "),i("el-table-column",{attrs:{prop:"address",label:"地址",formatter:e.formatAddress}}),e._v(" "),i("el-table-column",{attrs:{prop:"useTime",label:"投放日期",formatter:e.time}}),e._v(" "),i("el-table-column",{attrs:{prop:"description",label:"备注"}}),e._v(" "),i("el-table-column",{attrs:{prop:"rqUrl",label:"二维码"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.qrUrl,"preview-src-list":[e.row.qrUrl]}})]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"deviceImg",label:"图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.deviceImg,"preview-src-list":[e.row.deviceImg]}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/rest/deviceInfo/update"],expression:"['/rest/deviceInfo/update']"}],attrs:{type:"text",size:"small"},on:{click:function(i){return e.handleEdit(t)}}},[e._v("编辑")]),e._v(" "),i("el-button",{staticStyle:{color:"#C03639"},attrs:{type:"text",size:"mini"},on:{click:function(i){return e.check(t)}}},[e._v("检查项")]),e._v(" "),i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["/rest/deviceInfo/delete"],expression:"['/rest/deviceInfo/delete']"}],attrs:{type:"text",size:"small"},on:{click:function(i){return e.handleDelete(t)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}}),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible,title:"edit"===e.dialogType?"编辑":"新增"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.deviceInfo,rules:e.rules,"label-position":"right","label-width":"100px"}},[i("el-form-item",{attrs:{label:"设备名称",prop:"name"}},[i("el-input",{attrs:{placeholder:"设备名称"},model:{value:e.deviceInfo.deviceName,callback:function(t){e.$set(e.deviceInfo,"deviceName",t)},expression:"deviceInfo.deviceName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"类型",prop:"type"}},[i("el-popover",{staticStyle:{width:"100%"},attrs:{placement:"bottom",trigger:"click",hide:e.popoverHide}},[i("div",{staticStyle:{"text-align":"left",margin:"0"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.addDictInfo("device_type")}}},[e._v("新建条目")])],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.deviceTypes,height:"200"}},[i("el-table-column",{attrs:{width:"400px",property:"data_value",label:""},scopedSlots:e._u([{key:"header",fn:function(t){return[i("el-input",{attrs:{size:"medium",placeholder:"输入关键字搜索"},model:{value:e.searchDeviceType,callback:function(t){e.searchDeviceType=t},expression:"searchDeviceType"}})]}},{key:"default",fn:function(t){return[i("el-button",{staticStyle:{width:"100%","text-align":"left"},attrs:{size:"mini",type:"text"},on:{click:function(i){return e.selectDict(t)}}},[e._v(e._s(t.row.dataValue))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{color:"#C03639"},attrs:{type:"text",size:"mini"},on:{click:function(i){return e.editDictInfo(t)}}},[e._v("编辑")]),e._v(" "),i("el-button",{staticStyle:{color:"#8c939d"},attrs:{type:"text",size:"mini"},on:{click:function(i){return e.dictInfoDelete(t)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("el-button",{ref:"deviceTypeSelect",staticStyle:{width:"100%","text-align":"left",color:"#8c939d"},attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.deviceTypeTitle))])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"品牌",prop:"brand"}},[i("el-popover",{staticStyle:{width:"100%"},attrs:{placement:"bottom",trigger:"click",hide:e.popoverHide}},[i("div",{staticStyle:{"text-align":"left",margin:"0"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.addDictInfo("device_brand")}}},[e._v("新建条目")])],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.deviceBrands,height:"200"}},[i("el-table-column",{attrs:{width:"400px",property:"data_value",label:""},scopedSlots:e._u([{key:"header",fn:function(t){return[i("el-input",{attrs:{size:"medium",placeholder:"输入关键字搜索"},model:{value:e.searchDeviceBrand,callback:function(t){e.searchDeviceBrand=t},expression:"searchDeviceBrand"}})]}},{key:"default",fn:function(t){return[i("el-button",{staticStyle:{width:"100%","text-align":"left"},attrs:{size:"mini",type:"text"},on:{click:function(i){return e.selectDict(t)}}},[e._v(e._s(t.row.dataValue))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{color:"#C03639"},attrs:{type:"text",size:"mini"},on:{click:function(i){return e.editDictInfo(t)}}},[e._v("编辑")]),e._v(" "),i("el-button",{staticStyle:{color:"#8c939d"},attrs:{type:"text",size:"mini"},on:{click:function(i){return e.dictInfoDelete(t)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("el-button",{ref:"deviceBrandSelect",staticStyle:{width:"100%","text-align":"left",color:"#8c939d"},attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.deviceBrandTitle))])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"型号",prop:"model"}},[i("el-popover",{staticStyle:{width:"100%"},attrs:{placement:"bottom",trigger:"click",hide:e.popoverHide}},[i("div",{staticStyle:{"text-align":"left",margin:"0"}},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.addDictInfo("device_model")}}},[e._v("新建条目")])],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.deviceModels,height:"200"}},[i("el-table-column",{attrs:{width:"400px",property:"data_value",label:""},scopedSlots:e._u([{key:"header",fn:function(t){return[i("el-input",{attrs:{size:"medium",placeholder:"输入关键字搜索"},model:{value:e.searchDeviceMode,callback:function(t){e.searchDeviceMode=t},expression:"searchDeviceMode"}})]}},{key:"default",fn:function(t){return[i("el-button",{staticStyle:{width:"100%","text-align":"left"},attrs:{size:"mini",type:"text"},on:{click:function(i){return e.selectDict(t)}}},[e._v(e._s(t.row.dataValue))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{staticStyle:{color:"#C03639"},attrs:{type:"text",size:"mini"},on:{click:function(i){return e.editDictInfo(t)}}},[e._v("编辑")]),e._v(" "),i("el-button",{staticStyle:{color:"#8c939d"},attrs:{type:"text",size:"mini"},on:{click:function(i){return e.dictInfoDelete(t)}}},[e._v("删除")])]}}])})],1),e._v(" "),i("el-button",{ref:"deviceModelSelect",staticStyle:{width:"100%","text-align":"left",color:"#8c939d"},attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.deviceModelTitle))])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"位置",prop:"model"}},[i("el-select",{attrs:{placeholder:"建筑",clearable:""},on:{change:e.getEditFloors},model:{value:e.deviceInfo.buildingId,callback:function(t){e.$set(e.deviceInfo,"buildingId",t)},expression:"deviceInfo.buildingId"}},e._l(e.buildings,(function(e){return i("el-option",{key:e.id,attrs:{label:e.locationName,value:e.id}})})),1),e._v(" "),i("el-select",{attrs:{placeholder:"楼层",clearable:""},on:{change:e.louCeng},model:{value:e.deviceInfo.floorId,callback:function(t){e.$set(e.deviceInfo,"floorId",t)},expression:"deviceInfo.floorId"}},e._l(e.editViewFloors,(function(e){return i("el-option",{key:e.id,attrs:{label:e.locationName,value:e.id}})})),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"投用时间",prop:"putTime"}},[i("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},on:{change:e.shiJian},model:{value:e.deviceInfo.useTime,callback:function(t){e.$set(e.deviceInfo,"useTime",t)},expression:"deviceInfo.useTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"绑定蓝牙设备",prop:"putTime"}},[i("el-select",{attrs:{placeholder:"请选择",clearable:"",filterable:""},on:{change:e.lanYa},model:{value:e.deviceInfo.patrolPointId,callback:function(t){e.$set(e.deviceInfo,"patrolPointId",t)},expression:"deviceInfo.patrolPointId"}},e._l(e.lanYaSheBei,(function(e){return i("el-option",{key:e.id,attrs:{label:e.patrolName,value:e.id}})})),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"备注描述",prop:"description"}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:e.deviceInfo.description,callback:function(t){e.$set(e.deviceInfo,"description",t)},expression:"deviceInfo.description"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"图片"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadPath,"show-file-list":!1,"file-list":e.imgList,"on-success":e.handlePictureSuccess}},[e.deviceInfo.deviceImg?i("img",{staticClass:"avatar",attrs:{src:e.deviceInfo.deviceImg}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.confirmDeviceInfo}},[e._v("确定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{visible:e.dictDialogVisible,title:"edit"===e.dictDialogType?"编辑":"新增"},on:{"update:visible":function(t){e.dictDialogVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.dict,rules:e.rules,"label-width":"80px","label-position":"right"}},[i("el-form-item",{attrs:{label:"名称",prop:"data_value"}},[i("el-input",{attrs:{placeholder:"请输入名称"},model:{value:e.dict.dataValue,callback:function(t){e.$set(e.dict,"dataValue",t)},expression:"dict.dataValue"}})],1)],1),e._v(" "),i("div",{staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dictDialogVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.confirmDict}},[e._v("确定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{visible:e.dictDialogVisible1,title:"检查项","before-close":e.handleClose},on:{"update:visible":function(t){e.dictDialogVisible1=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"设备名称:"}},[i("div",[e._v(e._s(e.form.name))])]),e._v(" "),i("el-form-item",{attrs:{label:"类型:"}},[i("div",[e._v(e._s(e.form.typeName))])]),e._v(" "),i("el-form-item",{attrs:{label:"品牌:"}},[i("div",[e._v(e._s(e.form.brandName))])]),e._v(" "),i("el-form-item",{attrs:{label:"型号:"}},[i("div",[e._v(e._s(e.form.modelName))])])],1),e._v(" "),i("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:e.dynamicValidateForm,"label-width":"100px"}},[e._l(e.dynamicValidateForm.domains,(function(t,n){return i("el-form-item",{key:t.key,attrs:{label:"检查项",rules:{required:!0,message:"检查项不能为空",trigger:"blur"}}},[i("el-select",{attrs:{placeholder:"请选择"},on:{change:e.checkThree},model:{value:e.dynamicValidateForm["val"+n],callback:function(t){e.$set(e.dynamicValidateForm,"val"+n,t)},expression:"dynamicValidateForm['val'+index]"}},e._l(e.options,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),i("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(i){return i.preventDefault(),e.removeDomain(t)}}})],1)})),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")]),e._v(" "),i("el-button",{on:{click:e.addDomain}},[e._v("新增检查项")])],1)],2)],1)],1)},r=[],a=(i("ac6a"),i("96cf"),i("3b8d")),o=i("4381"),c=i("7be3"),s=i("814f"),l=i("fbcf"),d=i("bd17"),u=i("866d"),f=i("333d"),p=i("ed08"),m={companyId:localStorage.getItem("deptid"),uid:localStorage.getItem("uid"),id:void 0,deviceName:"",typeId:void 0,brandId:void 0,modelId:void 0,buildingId:void 0,floorId:void 0,useTime:void 0,description:"",deviceImg:"",patrolPointId:""},h={companyId:localStorage.getItem("deptid"),uid:localStorage.getItem("uid"),id:void 0,dataType:"",dataKey:"",dataValue:"",sorts:void 0,description:""},v={name:"DeviceInfo",components:{Pagination:f["a"]},directives:{permission:o["a"]},data:function(){return{tableKey:0,list:null,total:0,listLoading:!1,listQuery:{uid:localStorage.getItem("uid"),companyId:localStorage.getItem("deptid"),page:0,limit:50,deviceName:"",buildingId:void 0,floorId:void 0},deviceInfo:Object.assign({},m),lanYaSheBei:[],dialogVisible:!1,dialogType:"new",searchDeviceType:"",searchDeviceBrand:"",searchDeviceMode:"",orangeDeviceTypes:null,orangeDeviceBrands:null,orangeDeviceModels:null,deviceTypes:null,deviceBrands:null,deviceModels:null,buildings:null,floors:null,editViewFloors:null,dialogImageUrl:"",dialogImageVisible:!1,deviceInfoFloorClearable:!0,imgList:[],uploadPath:"http://47.100.240.228:8953/public/rest/img/upload",baseUrl:"http://47.100.240.228:8952",dictDialogVisible:!1,dictDialogVisible1:!1,dictDialogType:"new",dict:Object.assign({},h),deviceTypeTitle:"请选择",deviceModelTitle:"请选择",deviceBrandTitle:"请选择",rules:{deviceName:[{required:!0,message:"请输入岗位名",trigger:"blur"},{min:2,max:15,message:"长度在 2 到 15 个字符",trigger:"blur"}],state:[{required:!0,message:"请选择状态",trigger:"change"}]},form:{name:"",typeName:"",brandName:"",modelName:"",value:"",options:{},value1:"",options1:{},value2:"",options2:{}},list1:{uid:localStorage.getItem("uid"),limit:1e4,page:1},objCheck:{uid:localStorage.getItem("uid"),check:[]},xunGengList:{uid:localStorage.getItem("uid"),page:0},dynamicValidateForm:{domains:[]},options:[]}},watch:{searchDeviceType:function(e,t){this.deviceTypes=this.orangeDeviceTypes.filter((function(t){return~t.dataValue.indexOf(e)}))},searchDeviceBrand:function(e,t){this.deviceBrands=this.orangeDeviceBrands.filter((function(t){return~t.dataValue.indexOf(e)}))},searchDeviceMode:function(e,t){this.deviceModels=this.orangeDeviceModels.filter((function(t){return~t.dataValue.indexOf(e)}))}},created:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getList();case 2:return e.next=4,this.getDeviceTypes();case 4:return e.next=6,this.getDeviceBrands();case 6:return e.next=8,this.getDeviceModels();case 8:return e.next=10,this.getBuildings();case 10:this.checkList();case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{handleClose:function(e){this.$confirm("确认关闭？").then((function(t){setTimeout((function(){history.go(0)}),200),e()})).catch((function(e){}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(console.log(t.dynamicValidateForm),!e)return console.log("error submit!!"),!1;alert("submit!")}))},removeDomain:function(e){var t=this.dynamicValidateForm.domains.indexOf(e);-1!==t&&this.dynamicValidateForm.domains.splice(t,1)},addDomain:function(){this.dynamicValidateForm.domains.push({value:"",key:Date.now()})},getXunGengList:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d["f"])(t);case 3:i=e.sent,this.lanYaSheBei=i.data.rows,console.log(i),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}(),getList:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,e.prev=1,e.next=4,Object(c["f"])(this.listQuery);case 4:t=e.sent,this.listLoading=!1,console.log(t),this.list=t.data,this.total=t.count,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),this.listLoading=!1;case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));function t(){return e.apply(this,arguments)}return t}(),addCheckList:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c["h"])(t);case 3:i=e.sent,null==i.data?this.dynamicValidateForm.domains=[]:void 0==i.data&&null==i.data||i.data.forEach((function(e,t){n.dynamicValidateForm.domains.push({value:e.id,label:e.checkDescription}),n.$set(n.dynamicValidateForm,"val"+t,e.id),n.objCheck.check.push(e.id)})),console.log(this.dynamicValidateForm),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}(),checkList:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u["c"])(this.list1);case 3:t=e.sent,console.log(t),this.options=t.data,this.options.forEach((function(e){i.$set(e,"value",e.id),i.$set(e,"label",e.checkDescription),i.$set(e,"key",e.checkDescription)})),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}(),checkThree:function(e){var t=this;this.objCheck.check.push(e),console.log(e),console.log(this.objCheck),this.dynamicValidateForm.domains.forEach((function(e){t.objCheck.check==e.value&&t.$message({message:"检查项重复，请重选",type:"warning"})}))},popoverHide:function(){this.searchDeviceType="",this.searchDeviceBrand="",this.searchDeviceMode=""},addDictInfo:function(e){this.dict=Object.assign({},h),this.dict.dataType=e,this.dictDialogType="new",this.dictDialogVisible=!0},editDictInfo:function(e){this.dictDialogType="edit",this.dictDialogVisible=!0,this.dict=Object(p["c"])(e.row)},selectDict:function(e){this.searchDeviceType="",this.searchDeviceBrand="",this.searchDeviceMode="";var t=Object(p["c"])(e.row);console.log(t),"device_type"===t.dataType?(this.deviceInfo.typeId=t.dataKey,this.deviceTypeTitle=t.dataValue,this.$refs.deviceTypeSelect.$el.click()):"device_model"===t.dataType?(this.deviceInfo.modelId=t.dataKey,this.deviceModelTitle=t.dataValue,this.$refs.deviceModelSelect.$el.click()):"device_brand"===t.dataType&&(this.deviceInfo.brandId=t.dataKey,this.deviceBrandTitle=t.dataValue,this.$refs.deviceBrandSelect.$el.click())},confirmDict:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t="edit"===this.dictDialogType,!t){e.next=6;break}return e.next=4,Object(l["g"])(this.dict);case 4:e.next=8;break;case 6:return e.next=8,Object(l["a"])(this.dict);case 8:this.dictDialogVisible=!1,this.$message({showClose:!0,message:"保存成功",type:"success"}),this.getDeviceTypes(),this.getDeviceBrands(),this.getDeviceModels();case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),dictInfoDelete:function(e){var t=this,i=e.row;this.$confirm("确认删除吗?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["d"])(i.id);case 2:t.$message({showClose:!0,message:"删除成功",type:"success"}),t.getDeviceTypes(),t.getDeviceBrands(),t.getDeviceModels();case 6:case"end":return e.stop()}}),e)})))).catch((function(e){console.error(e)}))},getDeviceTypes:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,e.prev=1,e.next=4,Object(l["c"])("device_type",localStorage.getItem("deptid"));case 4:t=e.sent,console.log(t),this.listLoading=!1,this.deviceTypes=t.data,this.orangeDeviceTypes=t.data,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),this.listLoading=!1;case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));function t(){return e.apply(this,arguments)}return t}(),getDeviceBrands:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["c"])("device_brand",localStorage.getItem("deptid"));case 2:t=e.sent,i=t.data,this.deviceBrands=i,this.orangeDeviceBrands=t.result;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getDeviceModels:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,e.prev=1,e.next=4,Object(l["c"])("device_model",localStorage.getItem("deptid"));case 4:t=e.sent,this.listLoading=!1,this.deviceModels=t.data,this.orangeDeviceModels=t.data,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),this.listLoading=!1;case 13:case"end":return e.stop()}}),e,this,[[1,10]])})));function t(){return e.apply(this,arguments)}return t}(),getBuildings:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,e.prev=1,e.next=4,Object(s["b"])();case 4:t=e.sent,console.log("下面是位置"),console.log(t),this.listLoading=!1,this.buildings=t.result,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),this.listLoading=!1;case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));function t(){return e.apply(this,arguments)}return t}(),getFloors:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,e.prev=1,this.listQuery.floor=void 0,e.next=5,Object(s["a"])(t);case 5:i=e.sent,this.listLoading=!1,this.floors=i.result,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),this.listLoading=!1;case 13:case"end":return e.stop()}}),e,this,[[1,10]])})));function t(t){return e.apply(this,arguments)}return t}(),getEditFloors:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t),this.listLoading=!0,e.prev=2,this.deviceInfo.floorId=void 0,e.next=6,Object(s["a"])(t);case 6:i=e.sent,this.listLoading=!1,this.editViewFloors=i.result,this.xunGengList.buildingId=t,this.getXunGengList(this.xunGengList),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](2),this.listLoading=!1;case 16:case"end":return e.stop()}}),e,this,[[2,13]])})));function t(t){return e.apply(this,arguments)}return t}(),louCeng:function(e){console.log(e),this.xunGengList.floorId=e,this.getXunGengList(this.xunGengList)},handleSearch:function(){this.getList()},handlePictureSuccess:function(e,t,i){this.deviceInfo.deviceImg=this.baseUrl+"/public/rest/img/"+e.data.result,console.log(this.deviceInfo.deviceImg)},handlePictureRemove:function(e,t){console.log(e,t)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogImageVisibleVisible=!0},formatType:function(e,t){return e.typeName},formatBrand:function(e,t){return e.brandName},formatModel:function(e,t){return e.modelName},formatAddress:function(e,t){return e.buildingName+"-"+e.floorName},time:function(e,t){return null!=e.useTime?e.useTime.slice(0,10):null==e.useTime?"--":void 0},handleCreate:function(){this.deviceInfo=Object.assign({},m),this.deviceTypeTitle="请选择",this.deviceModelTitle="请选择",this.deviceBrandTitle="请选择",this.imgList=[],this.dialogType="new",this.dialogVisible=!0},handleEdit:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.xunGengList.buildingId=t.row.buildingId,this.xunGengList.floorId=t.row.floorId,this.getXunGengList(this.xunGengList),this.dialogType="edit",this.dialogVisible=!0,this.checkStrictly=!0,this.deviceInfo=Object(p["c"])(t.row),this.imgList=[{name:"food.jpeg",url:this.deviceInfo.deviceImg}],this.deviceInfo.modelId=String(this.deviceInfo.modelId),this.deviceInfo.brandId=String(this.deviceInfo.brandId),this.deviceInfo.typeId=String(this.deviceInfo.typeId),this.deviceInfo.uid=localStorage.getItem("uid"),this.deviceTypeTitle=(this.deviceTypes.filter((function(e){return e.dataKey==n.deviceInfo.typeId}))[0]||{}).dataValue,this.deviceModelTitle=(this.deviceModels.filter((function(e){return e.dataKey==n.deviceInfo.modelId}))[0]||{}).dataValue,this.deviceBrandTitle=(this.deviceBrands.filter((function(e){return e.dataKey==n.deviceInfo.brandId}))[0]||{}).dataValue,e.next=17,Object(s["a"])(this.deviceInfo.buildingId);case 17:i=e.sent,this.editViewFloors=i.result;case 19:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleExportQR:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["g"])(this.listQuery);case 2:t=e.sent,window.location.href=this.baseUrl+"/public/rest/qrZip/"+t.result,console.log(t);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),shiJian:function(e){console.log(e),this.deviceInfo.useTime=e+" 00:00:00"},confirmDeviceInfo:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t="edit"===this.dialogType,null!=this.deviceInfo.deviceName&&""!==this.deviceInfo.deviceName){e.next=4;break}return this.$message({showClose:!0,message:"设备名称不能为空",type:"warning"}),e.abrupt("return");case 4:if(console.log(this.deviceInfo.deviceName.length),!(this.deviceInfo.deviceName.length<2||this.deviceInfo.deviceName.length>15)){e.next=8;break}return this.$message({showClose:!0,message:"设备名称长度在 2 到 15 个字符",type:"warning"}),e.abrupt("return");case 8:if(void 0!==this.deviceInfo.typeId){e.next=11;break}return this.$message({showClose:!0,message:"类型不能为空",type:"warning"}),e.abrupt("return");case 11:if(void 0!==this.deviceInfo.brandId){e.next=14;break}return this.$message({showClose:!0,message:"品牌不能为空",type:"warning"}),e.abrupt("return");case 14:if(void 0!==this.deviceInfo.modelId){e.next=17;break}return this.$message({showClose:!0,message:"型号不能为空",type:"warning"}),e.abrupt("return");case 17:if(void 0!==this.deviceInfo.buildingId){e.next=20;break}return this.$message({showClose:!0,message:"位置不能为空",type:"warning"}),e.abrupt("return");case 20:if(!t){e.next=25;break}return e.next=23,Object(c["i"])(this.deviceInfo);case 23:e.next=27;break;case 25:return e.next=27,Object(c["a"])(this.deviceInfo);case 27:this.dialogVisible=!1,this.$message({showClose:!0,message:"保存成功",type:"success"}),this.getList();case 30:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleDelete:function(e){var t=this,i=e.row;this.$confirm("确认删除?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["c"])(i.id);case 2:t.$message({showClose:!0,message:"删除成功",type:"success"}),t.getList();case 4:case"end":return e.stop()}}),e)})))).catch((function(e){console.error(e)}))},lanYa:function(e){console.log(this.dict),console.log(this.deviceInfo),console.log(e),this.deviceInfo.patrolPointId=e},jianCha:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c["b"])(t);case 3:i=e.sent,2e4==i.code&&(this.$message({type:"success",message:i.msg}),setTimeout((function(){history.go(0)}),200),this.dictDialogVisible1=!1),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}(),check:function(e){console.log(e),this.dictDialogVisible1=!0;var t=e.row;this.form.name=t.deviceName,this.form.typeName=t.typeName,this.form.brandName=t.brandName,this.form.modelName=t.modelName,this.objCheck.deviceId=t.id,console.log(this.form),this.addCheckList(t.id)},onSubmit:function(){this.objCheck.check.forEach((function(e,t){})),this.objCheck.itemIds=this.objCheck.check,this.jianCha(this.objCheck),console.log(this.objCheck)}}},g=v,b=(i("60fc"),i("2877")),y=Object(b["a"])(g,n,r,!1,null,"42533a46",null);t["default"]=y.exports},fbcf:function(e,t,i){"use strict";i.d(t,"f",(function(){return a})),i.d(t,"c",(function(){return o})),i.d(t,"e",(function(){return c})),i.d(t,"b",(function(){return s})),i.d(t,"h",(function(){return l})),i.d(t,"d",(function(){return d})),i.d(t,"a",(function(){return u})),i.d(t,"g",(function(){return f}));var n=i("b775"),r=i("9702");function a(e){return Object(n["a"])({url:"/rest/dict/list",method:"post",data:e})}function o(e,t){return Object(r["a"])({url:"/rest/dict/companyDictListByType",method:"get",params:{type:e,companyId:t}})}function c(e){return Object(n["a"])({url:"/rest/dict/info",method:"get",params:{type:e}})}function s(e){return Object(n["a"])({url:"/rest/dict/add",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/rest/dict/update",method:"post",data:e})}function d(e){return Object(r["a"])({url:"/rest/dict/delete",method:"get",params:{id:e}})}function u(e){return Object(r["a"])({url:"/rest/dict/addDeviceDic",method:"post",data:e})}function f(e){return Object(r["a"])({url:"/rest/dict/updateDeviceDic",method:"post",data:e})}}}]);