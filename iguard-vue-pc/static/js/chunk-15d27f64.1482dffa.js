(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15d27f64"],{"09f4":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),Math.easeInOutQuad=function(t,e,n,r){return t/=r/2,t<1?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e)};var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function a(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function i(t,e,n){var i=o(),u=t-i,l=20,c=0;e="undefined"===typeof e?500:e;var s=function t(){c+=l;var o=Math.easeInOutQuad(c,i,u,e);a(o),c<e?r(t):n&&"function"===typeof n&&n()};s()}},1382:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-row",{attrs:{gutter:24}},[n("el-col",{attrs:{span:5.5}},[n("el-date-picker",{attrs:{type:"daterange","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:!1},on:{change:t.time},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._v(" "),n("el-col",{attrs:{span:3}},[n("el-select",{attrs:{filterable:"",placeholder:"请选择企业"},on:{change:t.company},model:{value:t.value5,callback:function(e){t.value5=e},expression:"value5"}},t._l(t.options5,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),n("el-col",{attrs:{span:3}},[n("el-select",{attrs:{placeholder:"请选择类型"},on:{change:t.type},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}},t._l(t.options,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),n("el-col",{attrs:{span:3}},[n("el-select",{attrs:{placeholder:"请选择建筑"},on:{change:t.location},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},t._l(t.options1,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),n("el-col",{attrs:{span:3}},[n("el-select",{attrs:{placeholder:"请选择楼层"},on:{change:t.floor},model:{value:t.value3,callback:function(e){t.value3=e},expression:"value3"}},t._l(t.options2,(function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),n("el-col",{attrs:{span:3}},[n("el-input",{attrs:{placeholder:"输入设备名称"},model:{value:t.value4,callback:function(e){t.value4=e},expression:"value4"}})],1),t._v(" "),n("el-col",{attrs:{span:4}},[n("el-button",{attrs:{type:"primary"},on:{click:t.check}},[t._v("查询")]),t._v(" "),n("el-button",{attrs:{type:"primary"}},[t._v("导出")])],1)],1),t._v(" "),n("el-divider"),t._v(" "),n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"600",border:""}},[n("el-table-column",{attrs:{width:"50",label:"序号"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.$index+t.listQuery1.page*t.listQuery1.pageSize+1))])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"deviceName",label:"故障设备名"}}),t._v(" "),n("el-table-column",{attrs:{prop:"typeName",label:"类型"}}),t._v(" "),n("el-table-column",{attrs:{prop:"modelName",label:"型号"}}),t._v(" "),n("el-table-column",{attrs:{prop:"completePatrolEvents",label:"位置",formatter:t.weiZhi}}),t._v(" "),n("el-table-column",{attrs:{prop:"signTime",label:"故障提交时间",formatter:t.formatting}}),t._v(" "),n("el-table-column",{attrs:{prop:"executeName",label:"故障提交人"}}),t._v(" "),n("el-table-column",{attrs:{prop:"itemStr",label:"检查参数详情",formatter:t.canShu}}),t._v(" "),n("el-table-column",{attrs:{prop:"checkRemark",label:"故障描述"}}),t._v(" "),n("el-table-column",{attrs:{prop:"deviceImg",label:"故障照片"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.deviceImg,"preview-src-list":t.row.deviceImg.split(",")}})]}}])})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery1.page,limit:t.listQuery1.pageSize},on:{"update:page":function(e){return t.$set(t.listQuery1,"page",e)},"update:limit":function(e){return t.$set(t.listQuery1,"pageSize",e)},pagination:t.getList}})],1)],1)},a=[],o=(n("a481"),n("7f7f"),n("ac6a"),n("96cf"),n("3b8d")),i=n("814f"),u=n("9702");function l(t){return Object(u["a"])({url:"/rest/PCReport/getDeviceDefaultDetail",method:"post",data:t})}var c=n("fbcf"),s=n("6403"),p=n("333d"),d={components:{Pagination:p["a"]},data:function(){return{listQuery:{uid:localStorage.getItem("uid"),companyId:localStorage.getItem("deptid"),page:1,limit:50,deviceName:"",buildingId:void 0,floorId:void 0},listQuery1:{page:0,pageSize:50,uid:localStorage.getItem("uid")},total:0,loading:!0,tableData:[],value:[new Date,new Date],options:[],value1:"",options1:[],value2:"",options2:[],value3:"",value4:"",options5:[],value5:""}},mounted:function(){this.newTime([new Date,new Date]),1==localStorage.getItem("uid")?this.getList1():this.getCompany(),this.getBuildings(),this.getDeviceTypes()},methods:{getList1:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["f"])(localStorage.getItem("uid"));case 3:e=t.sent,console.log(e),this.options5=e.result,this.options5.forEach((function(t){n.$set(t,"label",t.name),n.$set(t,"value",t.id)})),this.getList(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(){return t.apply(this,arguments)}return e}(),getCompany:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["b"])(localStorage.getItem("uid"));case 3:e=t.sent,console.log(e),this.options5.push(e.result),this.options5.forEach((function(t){n.$set(t,"label",t.name),n.$set(t,"value",t.id)})),this.value5=e.result.id,this.listQuery1.companyId=e.result.id,this.getList(),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),console.log(t.t0);case 15:case"end":return t.stop()}}),t,this,[[0,12]])})));function e(){return t.apply(this,arguments)}return e}(),company:function(t){this.listQuery1.companyId=t},p:function(t){return t<10?"0"+t:t},time:function(t){console.log(t);var e=new Date(t[0]),n=e.getFullYear(),r=this.p(e.getMonth()+1),a=this.p(e.getDate());this.listQuery1.startTime=n+"-"+r+"-"+a+" 00:00:00";var o=new Date(t[1]),i=o.getFullYear(),u=this.p(o.getMonth()+1),l=this.p(o.getDate());this.listQuery1.endTime=i+"-"+u+"-"+l+" 23:59:59"},newTime:function(t){console.log(t);var e=new Date(t[0]),n=e.getFullYear(),r=this.p(e.getMonth()+1),a=this.p(e.getDate());this.listQuery1.startTime=n+"-"+r+"-"+a+" 00:00:00";var o=new Date(t[1]),i=o.getFullYear(),u=this.p(o.getMonth()+1),l=this.p(o.getDate());this.listQuery1.endTime=i+"-"+u+"-"+l+" 23:59:59"},formatting:function(t,e){var n=new Date(t.signTime),r=n.getFullYear(),a=this.p(n.getMonth()+1),o=this.p(n.getDate()),i=this.p(n.getHours()),u=this.p(n.getMinutes()),l=this.p(n.getSeconds());return r+"-"+a+"-"+o+" "+i+":"+u+":"+l},weiZhi:function(t,e){return t.buildingName+"/"+t.floorName},canShu:function(t,e){return t.itemStr.replace(/,/g,"\n,")},getList:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.listQuery1.page=0,t.prev=1,t.next=4,l(this.listQuery1);case 4:e=t.sent,console.log(e),this.total=e.count,this.tableData=e.data,this.loading=!1,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,this,[[1,11]])})));function e(){return t.apply(this,arguments)}return e}(),getDeviceTypes:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.listLoading=!0,t.prev=1,t.next=4,Object(c["c"])("device_type",localStorage.getItem("deptid"));case 4:e=t.sent,this.options=e.data,this.options.forEach((function(t){n.$set(t,"value",t.dataKey),n.$set(t,"label",t.dataValue)})),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),console.log(t.t0);case 12:case"end":return t.stop()}}),t,this,[[1,9]])})));function e(){return t.apply(this,arguments)}return e}(),getBuildings:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(i["b"])();case 3:e=t.sent,console.log("下面是位置"),console.log(e),this.options1=e.result,this.options1.forEach((function(t){n.$set(t,"value",t.id),n.$set(t,"label",t.locationName)})),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));function e(){return t.apply(this,arguments)}return e}(),getFloors:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(i["a"])(e);case 3:n=t.sent,this.options2=n.result,this.options2.forEach((function(t){r.$set(t,"value",t.id),r.$set(t,"label",t.locationName)})),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}(),check:function(){this.listQuery1.deviceName=this.value4,this.getList()},location:function(t){console.log(t),this.listQuery1.buildingId=t,this.getFloors(t)},floor:function(t){this.listQuery1.floorId=t},type:function(t){this.listQuery1.deviceTypeId=t}}},m=d,f=(n("3b67"),n("2877")),g=Object(f["a"])(m,r,a,!1,null,"26e1812c",null);e["default"]=g.exports},"23ed":function(t,e,n){},"3b67":function(t,e,n){"use strict";var r=n("23ed"),a=n.n(r);a.a},6403:function(t,e,n){"use strict";n.d(e,"f",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"e",(function(){return u})),n.d(e,"a",(function(){return l})),n.d(e,"d",(function(){return c})),n.d(e,"b",(function(){return s}));var r=n("b775"),a=n("7605");function o(t){return Object(r["a"])({url:"/rest/department/subCompanyList",method:"get",params:{uid:t}})}function i(t){return Object(a["a"])({url:"/rest/buildingLocation/getCompanyDeptByCompanyId",method:"get",params:{company_id:t}})}function u(t){return Object(r["a"])({url:"/rest/tbEventReport/getPCReportEventDetailByPage",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/rest/buildingLocation/getBuildingLocationFloor",method:"get",params:{parentId:t}})}function c(t){return Object(r["a"])({url:"/rest/tbEventTypeConfig/list",method:"post",data:t})}function s(t){return Object(r["a"])({url:"/rest/department/getCompanyByUid",method:"get",params:{uid:t}})}},"814f":function(t,e,n){"use strict";n.d(e,"g",(function(){return o})),n.d(e,"f",(function(){return i})),n.d(e,"d",(function(){return u})),n.d(e,"e",(function(){return l})),n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return p}));var r=n("b775"),a=n("7605");function o(t){return Object(a["a"])({url:"/rest/buildingLocation/list",method:"post",data:t})}function i(t){return Object(r["a"])({url:"/rest/tbBuildingLocation/update",method:"post",data:t})}function u(t){return Object(a["a"])({url:"/rest/buildingLocation/add",method:"post",data:t})}function l(t){return Object(a["a"])({url:"/rest/buildingLocation/removeBuildingById",method:"post",data:t})}function c(t){return Object(a["a"])({url:"/rest/buildingLocation/getCompanyDept",method:"get",params:{uid:t}})}function s(){return Object(r["a"])({url:"/rest/tbBuildingLocation/getCompanyBuildingLocation",method:"get"})}function p(t){return Object(a["a"])({url:"/rest/buildingLocation/getBuildingLocationFloor",method:"get",params:{parentId:t}})}},9702:function(t,e,n){"use strict";var r=n("bc3a"),a=n.n(r),o=n("5c96"),i=n("4360"),u=n("5f87"),l=a.a.create({baseURL:"http://47.100.240.228:8953",timeout:3e5,responseType:"json"});l.interceptors.request.use((function(t){return i["a"].getters.token&&(t.headers["LinkAdmin-Token"]=Object(u["a"])()),t}),(function(t){return console.log(t),Promise.reject(t)})),l.interceptors.response.use((function(t){var e=t.data;return 2e4!==e.code?(Object(o["Message"])({message:e.msg||"Error",type:"error",duration:3e3}),50001===e.code&&o["MessageBox"].confirm("你已经退出系统了, 你可以取消停留在这一页, 或者再次登录","提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((function(){i["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(e.msg||"Error"))):e}),(function(t){return console.log("err"+t),Object(o["Message"])({message:t.message,type:"error",duration:3e3}),Promise.reject(t)})),e["a"]=l},fbcf:function(t,e,n){"use strict";n.d(e,"f",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"e",(function(){return u})),n.d(e,"b",(function(){return l})),n.d(e,"h",(function(){return c})),n.d(e,"d",(function(){return s})),n.d(e,"a",(function(){return p})),n.d(e,"g",(function(){return d}));var r=n("b775"),a=n("9702");function o(t){return Object(r["a"])({url:"/rest/dict/list",method:"post",data:t})}function i(t,e){return Object(a["a"])({url:"/rest/dict/companyDictListByType",method:"get",params:{type:t,companyId:e}})}function u(t){return Object(r["a"])({url:"/rest/dict/info",method:"get",params:{type:t}})}function l(t){return Object(r["a"])({url:"/rest/dict/add",method:"post",data:t})}function c(t){return Object(r["a"])({url:"/rest/dict/update",method:"post",data:t})}function s(t){return Object(a["a"])({url:"/rest/dict/delete",method:"get",params:{id:t}})}function p(t){return Object(a["a"])({url:"/rest/dict/addDeviceDic",method:"post",data:t})}function d(t){return Object(a["a"])({url:"/rest/dict/updateDeviceDic",method:"post",data:t})}}}]);