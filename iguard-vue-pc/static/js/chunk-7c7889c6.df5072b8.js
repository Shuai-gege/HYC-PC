(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c7889c6"],{"0764":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:10}},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.time},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{placeholder:"分类"},on:{change:e.fenLei},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{placeholder:"品牌"},on:{change:e.paiZi},model:{value:e.value3,callback:function(t){e.value3=t},expression:"value3"}},e._l(e.options1,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{placeholder:"名称"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-button",{attrs:{type:"primary"},on:{click:e.query}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.excel}},[e._v("导出")])],1)],1),e._v(" "),a("el-divider"),e._v(" "),a("div",[a("el-row",[a("el-col",{attrs:{span:23}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"550",border:""}},[a("el-table-column",{attrs:{width:"50",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+(e.listQuery.page-1)*e.listQuery.limit+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"materialTypeName",label:"分类"}}),e._v(" "),a("el-table-column",{attrs:{prop:"materialBrandName",label:"品牌"}}),e._v(" "),a("el-table-column",{attrs:{prop:"materialName",label:"物料名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"useNumber",label:"使用数量",sortable:"","sort-method":e.paiXu}}),e._v(" "),a("el-table-column",{attrs:{prop:"materialUnit",label:"单位"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.aa(t)}}},[e._v("详情")])]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}})],1)],1)],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:"物料使用详情",visible:e.drawer,width:"70%"},on:{"update:visible":function(t){e.drawer=t}}},[a("el-row",[a("el-col",{attrs:{span:23}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData1,height:"550",border:""}},[a("el-table-column",{attrs:{width:"50",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+(e.listQuery.page-1)*e.listQuery.limit+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"useTime",label:"时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"checkUserName",label:"使用确认人"}}),e._v(" "),a("el-table-column",{attrs:{prop:"useNumber",label:"使用数量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"eventCode",label:"事件编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.bb(t)}}},[e._v(e._s(t.row.eventCode))])]}}])}),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total1>0,expression:"total1>0"}],attrs:{total:e.total1,page:e.listQuery1.page,limit:e.listQuery1.limit},on:{"update:page":function(t){return e.$set(e.listQuery1,"page",t)},"update:limit":function(t){return e.$set(e.listQuery1,"limit",t)},pagination:e.orderList}})],1)],1)],1)],1)],1)],1)},r=[],i=(a("ac6a"),a("96cf"),a("3b8d")),l=a("b775");function o(e){return Object(l["a"])({url:"/rest/tbEventMaterials/getPCMaterialReport",method:"post",data:e})}function s(e){return Object(l["a"])({url:"/rest/tbEventMaterials/getMaterialReportDetail",method:"post",data:e})}function u(e){return Object(l["a"])({url:"/rest/tbMaterialsType/list",method:"post",data:e})}function c(e){return Object(l["a"])({url:"/rest/tbMaterialsBrand/list",method:"post",data:e})}var p=a("333d"),m={uid:localStorage.getItem("uid"),endTime:"",limit:50,materialBrandId:"",materialId:"",materialName:"",materialTypeId:"",page:1,startTime:""},d={components:{Pagination:p["a"]},name:"material",watch:{},data:function(){return{value:"",drawer:!1,innerDrawer:!1,options:[{value:"",label:"全部(分类)"}],value2:"",input:"",options1:[{value:"",label:"全部(品牌)"}],value3:"",tableData:[],tableData1:[],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},listQuery:Object.assign({},m),listQuery1:Object.assign({},m),total:0,total1:0,startTime:"",loading:!0,endTime:"",materialType:{uid:localStorage.getItem("uid"),id:"",typeName:""},pinPai:{uid:localStorage.getItem("uid"),brandName:"",id:""}}},mounted:function(){this.listQuery.company_id=localStorage.getItem("deptid"),this.getList(),this.materialTypeList(),this.tbMaterialsBrandList(),console.log(this.value)},methods:{paiXu:function(e,t){return e.useNumber-t.useNumber},getList:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,o(this.listQuery);case 4:t=e.sent,this.total=t.result.records,this.tableData=t.result.rows,this.loading=!1,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,10]])})));function t(){return e.apply(this,arguments)}return t}(),orderList:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.company_id=localStorage.getItem("deptid"),e.next=4,s(t);case 4:a=e.sent,this.total1=a.result.records,this.tableData1=a.result.rows,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}(),aa:function(e){this.listQuery1.materialId=e.row.materialId,this.orderList(this.listQuery1),this.drawer=!0},materialTypeList:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u(this.materialType);case 3:t=e.sent,t.result.rows.forEach((function(e){a.options.push(e),a.$set(e,"label",e.typeName),a.$set(e,"value",e.id)})),console.log(t),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}(),tbMaterialsBrandList:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c(this.pinPai);case 3:t=e.sent,t.result.rows.forEach((function(e){a.options1.push(e),a.$set(e,"label",e.brandName),a.$set(e,"value",e.id)})),console.log(t),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}(),fenLei:function(e){console.log(e),this.listQuery.materialTypeId=e,this.listQuery1.materialTypeId=e},paiZi:function(e){console.log(e),this.listQuery.materialBrandId=e,this.listQuery1.materialBrandId=e},p:function(e){return e<10?"0"+e:e},time:function(e){if(console.log(e),null!=e){var t=new Date(e[0]),a=t.getFullYear(),n=this.p(t.getMonth()+1),r=this.p(t.getDate());this.listQuery.startTime=a+"-"+n+"-"+r,this.startTime=a+"-"+n+"-"+r;var i=new Date(e[1]),l=i.getFullYear(),o=this.p(i.getMonth()+1),s=this.p(i.getDate());this.listQuery.endTime=l+"-"+o+"-"+s,this.endTime=l+"-"+o+"-"+s,console.log(this.startTime),console.log(this.endTime)}},bb:function(e){localStorage.setItem("baseUrl","http://47.100.240.228"),this.drawer=!1,this.$router.push({name:"orderDetails",query:{eventStatusNow:2,event_id:e.row.eventId,delay:"未逾期"}})},excel:function(e){var t=this;this.$message({message:"数据量较大，请耐心等待！~",type:"warning"}),this.listQuery.limit=1e5,this.getList(),setTimeout((function(){Promise.resolve().then(function(){var e=a("8b02"),n=e.export_json_to_excel,r=["分类","品牌","物料名称","使用数量","单位"],i=["materialTypeName","materialBrandName","materialName","useNumber","materialUnit"],l=t.tableData,o=t.formatJson(i,l);""==t.value?n(r,o,"物料使用报表"+(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate()):n(r,o,"物料使用报表"+t.listQuery.startTime+"~"+t.listQuery.endTime)}.bind(null,a)).catch(a.oe)}),5e3)},formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))}))},query:function(){this.loading=!0,this.listQuery.materialName=this.input,this.getList()}}},v=d,h=(a("ee0b"),a("2877")),b=Object(h["a"])(v,n,r,!1,null,"c0587b00",null);t["default"]=b.exports},"09f4":function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),Math.easeInOutQuad=function(e,t,a,n){return e/=n/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function r(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function i(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(e,t,a){var l=i(),o=e-l,s=20,u=0;t="undefined"===typeof t?500:t;var c=function e(){u+=s;var i=Math.easeInOutQuad(u,l,o,t);r(i),u<t?n(e):a&&"function"===typeof a&&a()};c()}},a654:function(e,t,a){},ee0b:function(e,t,a){"use strict";var n=a("a654"),r=a.n(n);r.a}}]);