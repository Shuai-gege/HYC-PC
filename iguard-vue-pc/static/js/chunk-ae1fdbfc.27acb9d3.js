(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ae1fdbfc"],{"06cd":function(e,t,a){"use strict";var n=a("bc3a"),o=a.n(n),i=a("5c96"),r=a("4360"),s=a("5f87"),l=o.a.create({baseURL:"http://47.100.240.228:8950",timeout:3e7,responseType:"json"});l.interceptors.request.use((function(e){return r["a"].getters.token&&(e.headers["LinkAdmin-Token"]=Object(s["a"])()),e}),(function(e){return console.log(e),Promise.reject(e)})),l.interceptors.response.use((function(e){var t=e.data;return 2e4!==t.code?(Object(i["Message"])({message:t.msg||"Error",type:"error",duration:3e3}),50001===t.code&&i["MessageBox"].confirm("你已经退出系统了, 你可以取消停留在这一页, 或者再次登录","提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((function(){r["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(t.msg||"Error"))):t}),(function(e){return console.log("err"+e),Object(i["Message"])({message:e.message,type:"error",duration:3e3}),Promise.reject(e)})),t["a"]=l},"09f4":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),Math.easeInOutQuad=function(e,t,a,n){return e/=n/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function o(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function i(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function r(e,t,a){var r=i(),s=e-r,l=20,c=0;t="undefined"===typeof t?500:t;var u=function e(){c+=l;var i=Math.easeInOutQuad(c,r,s,t);o(i),c<t?n(e):a&&"function"===typeof a&&a()};u()}},"1a9e":function(e,t,a){"use strict";var n=a("9151"),o=a.n(n);o.a},2887:function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return i})),a.d(t,"f",(function(){return r})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return l})),a.d(t,"e",(function(){return c}));var n=a("b775");function o(e){return Object(n["a"])({url:"/rest/tbEventReport/getPCReportEventByPage",method:"post",data:e})}function i(e){return Object(n["a"])({url:"/rest/department/subCompanyList",method:"get",params:{uid:e}})}function r(e){return Object(n["a"])({url:"/rest/department/subDeptByDeptId",method:"get",params:{deptId:e}})}function s(e){return Object(n["a"])({url:"/rest/department/getCompanyByUid",method:"get",params:{uid:e}})}function l(e){return Object(n["a"])({url:"/rest/tbEventTypeConfig/list",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/rest/department/subDeptByDeptId",method:"get",params:{deptId:e}})}},"542c":function(e,t,a){},6403:function(e,t,a){"use strict";a.d(t,"f",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"e",(function(){return s})),a.d(t,"a",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"b",(function(){return u}));var n=a("b775"),o=a("7605");function i(e){return Object(n["a"])({url:"/rest/department/subCompanyList",method:"get",params:{uid:e}})}function r(e){return Object(o["a"])({url:"/rest/buildingLocation/getCompanyDeptByCompanyId",method:"get",params:{company_id:e}})}function s(e){return Object(n["a"])({url:"/rest/tbEventReport/getPCReportEventDetailByPage",method:"post",data:e})}function l(e){return Object(o["a"])({url:"/rest/buildingLocation/getBuildingLocationFloor",method:"get",params:{parentId:e}})}function c(e){return Object(n["a"])({url:"/rest/tbEventTypeConfig/list",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/rest/department/getCompanyByUid",method:"get",params:{uid:e}})}},9151:function(e,t,a){},9702:function(e,t,a){"use strict";var n=a("bc3a"),o=a.n(n),i=a("5c96"),r=a("4360"),s=a("5f87"),l=o.a.create({baseURL:"http://47.100.240.228:8953",timeout:3e5,responseType:"json"});l.interceptors.request.use((function(e){return r["a"].getters.token&&(e.headers["LinkAdmin-Token"]=Object(s["a"])()),e}),(function(e){return console.log(e),Promise.reject(e)})),l.interceptors.response.use((function(e){var t=e.data;return 2e4!==t.code?(Object(i["Message"])({message:t.msg||"Error",type:"error",duration:3e3}),50001===t.code&&i["MessageBox"].confirm("你已经退出系统了, 你可以取消停留在这一页, 或者再次登录","提示",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then((function(){r["a"].dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(t.msg||"Error"))):t}),(function(e){return console.log("err"+e),Object(i["Message"])({message:e.message,type:"error",duration:3e3}),Promise.reject(e)})),t["a"]=l},b1a2:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:5.5}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:e.time},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择企业"},on:{change:e.company},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("treeselect",{attrs:{options:e.departments,normalizer:e.normalizer,placeholder:"选择部门"},on:{input:e.shu},model:{value:e.listQuery.deptId,callback:function(t){e.$set(e.listQuery,"deptId",t)},expression:"listQuery.deptId"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{placeholder:"输入姓名"},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:e.check}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.excel}},[e._v("导出")])],1)],1),e._v(" "),a("el-divider"),e._v(" "),a("div",[a("el-row",[a("el-col",{attrs:{span:23}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"600",border:""}},[a("el-table-column",{attrs:{width:"50",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+(e.listQuery.page-1)*e.listQuery.pageSize+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deptName",label:"部门"}}),e._v(" "),a("el-table-column",{attrs:{prop:"checkEvents",label:"点检任务数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"completeCheckEvents",label:"点检任务完成数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"eventCompletePR",label:"事件完成率",formatter:e.pr1}}),e._v(" "),a("el-table-column",{attrs:{prop:"checkDeviceCount",label:"需点检设备数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"completeDevices",label:"实际点检设备数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceCompletePR",label:"点检完成率",formatter:e.pr}}),e._v(" "),a("el-table-column",{attrs:{prop:"checkEvents",label:"位置核验未通过数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"signInFaceNo",label:"人脸核验未通过数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.noFace(t)}}},[e._v(e._s(t.row.signInFaceNo))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"zip",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.order(t)}}},[e._v("详情")])]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.pageSize},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"pageSize",t)},pagination:e.checkSpotUser}})],1)],1)],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:"个人点检事件详情",visible:e.dialogVisible,width:"70%","before-close":e.handleClose,top:"3vh"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"title"},[a("div",[a("i",[e._v("企业")]),e._v("：\n          "),a("i",[e._v(e._s(e.PIM.companyName))])]),e._v(" "),a("div",[a("i",[e._v("部门")]),e._v("：\n          "),a("i",[e._v(e._s(e.PIM.deptName))])]),e._v(" "),a("div",[a("i",[e._v("姓名")]),e._v("：\n          "),a("i",[e._v(e._s(e.PIM.userName))])]),e._v(" "),void 0!=e.PIM.time?a("div",[a("i",[e._v("查询时间")]),e._v("：\n          "),a("i",[e._v(e._s(e.PIM.time))])]):a("div",[a("i",[e._v("查询时间")]),e._v("：\n          "),a("i",[e._v("全部")])])]),e._v(" "),a("el-tag",{attrs:{type:"warning"}},[e._v("未完成事件")]),e._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading1,expression:"loading1"}],staticStyle:{width:"100%"},attrs:{data:e.tableData1,height:"300",border:""}},[a("el-table-column",{attrs:{width:"50",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+e.checkNoEvent.page*e.checkNoEvent.pageSize+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"detailCode",label:"点检任务编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"taskName",label:"点检任务名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"startTime",label:"任务开始时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endTime",label:"任务结束时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"任务状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.noEvent(t)}}},[e._v("未完成")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceIdsCount",label:"需点检设备数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceIdsNoCount",label:"未完成点检设备数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"facePatrolPointNoCheckCount",label:"人脸核验未通过数"}})],1),e._v(" "),a("el-pagination",{attrs:{background:"","page-sizes":[50,100,200,500],"page-size":50,layout:"total, sizes, prev, pager, next, jumper",total:e.total1},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-tag",{attrs:{type:"success"}},[e._v("完成事件")]),e._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading2,expression:"loading2"}],staticStyle:{width:"100%"},attrs:{data:e.tableData2,height:"300",border:""}},[a("el-table-column",{attrs:{width:"50",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+e.checkNoEvent.page*e.checkNoEvent.pageSize+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"detailCode",label:"点检任务编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"taskName",label:"点检任务名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"startTime",label:"任务开始时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endTime",label:"任务结束时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"任务状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.noEvent(t)}}},[e._v("已完成")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceIdsCount",label:"需点检设备数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceIdsNoCount",label:"未完成点检设备数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"facePatrolPointNoCheckCount",label:"人脸核验未通过数"}})],1),e._v(" "),a("el-pagination",{attrs:{background:"","page-sizes":[50,100,200,500],"page-size":50,layout:"total, sizes, prev, pager, next, jumper",total:e.total2},on:{"size-change":e.handleSizeChange1,"current-change":e.handleCurrentChange1}})],1)],1)],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:"设备点检明细",visible:e.dialogVisible2,width:"70%","before-close":e.handleClose,top:"3vh"},on:{"update:visible":function(t){e.dialogVisible2=t}}},[a("div",{staticClass:"title"},[a("div",[a("i",[e._v("企业")]),e._v("：\n          "),a("i",[e._v(e._s(e.spotDetail.companyName))])]),e._v(" "),a("div",[a("i",[e._v("部门")]),e._v("：\n          "),a("i",[e._v(e._s(e.spotDetail.deptName))])]),e._v(" "),a("div",[a("i",[e._v("姓名")]),e._v("：\n          "),a("i",[e._v(e._s(e.spotDetail.userName))])]),e._v(" "),void 0!=e.spotDetail.time?a("div",[a("i",[e._v("查询时间")]),e._v("：\n          "),a("i",[e._v(e._s(e.spotDetail.time))])]):a("div",[a("i",[e._v("查询时间")]),e._v("：\n          "),a("i",[e._v("全部")])])]),e._v(" "),a("div",{staticClass:"title"},[a("div",[a("i",[e._v("点检任务名称")]),e._v("：\n          "),a("i",[e._v(e._s(e.spotDetail.eventName))])]),e._v(" "),a("div",[a("i",[e._v("点检任务编号")]),e._v("：\n          "),a("i",[e._v(e._s(e.spotDetail.eventCode))])])]),e._v(" "),a("el-tag",{attrs:{type:"warning"}},[e._v("未点检设备")]),e._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading3,expression:"loading3"}],staticStyle:{width:"100%"},attrs:{data:e.tableData3,height:"300",border:""}},[a("el-table-column",{attrs:{width:"50",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+e.spotDetails.page*e.spotDetails.pageSize+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceName",label:"设备名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeName",label:"设备类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"modelName",label:"设备型号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"itemStr",label:"检查项参数",formatter:e.parameter,width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"checkResult",label:"点检结果",formatter:e.result}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceName",label:"设备点检备注"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceImg",label:"设备照片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.deviceImg,"preview-src-list":e.row.deviceImg.split(",")}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"executeName",label:"位置核验"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.order(t)}}},[e._v("未完成")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"faceCheck",label:"人脸核验"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.faceCheck?a("el-button",{attrs:{type:"text",size:"small"}},[e._v("--")]):e._e(),e._v(" "),1==t.row.faceCheck?a("el-button",{attrs:{type:"text",size:"small"}},[e._v("人脸未核验")]):e._e(),e._v(" "),2==t.row.faceCheck?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.faceCheck(t)}}},[e._v("核验成功")]):e._e(),e._v(" "),3==t.row.faceCheck?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.faceCheck(t)}}},[e._v("核验失败")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"signTime",label:"点检时间",formatter:e.signTime}})],1),e._v(" "),a("el-pagination",{attrs:{background:"","page-sizes":[50,100,200,500],"page-size":50,layout:"total, sizes, prev, pager, next, jumper",total:e.total3},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-tag",{attrs:{type:"success"}},[e._v("已点检设备")]),e._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading4,expression:"loading4"}],staticStyle:{width:"100%"},attrs:{data:e.tableData4,height:"300",border:""}},[a("el-table-column",{attrs:{width:"50",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+e.spotDetails.page*e.spotDetails.pageSize+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceName",label:"设备名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"typeName",label:"设备类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"modelName",label:"设备型号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"itemStr",label:"检查项参数",formatter:e.parameter,width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"checkResult",label:"点检结果",formatter:e.result}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceName",label:"设备点检备注"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceImg",label:"设备照片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.deviceImg,"preview-src-list":e.row.deviceImg.split(",")}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"executeName",label:"位置核验"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.order(t)}}},[e._v("未完成")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"taskType",label:"人脸核验"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.faceCheck?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.faceCheck(t)}}},[e._v("--")]):e._e(),e._v(" "),1==t.row.faceCheck?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.faceCheck(t)}}},[e._v("人脸未核验")]):e._e(),e._v(" "),2==t.row.faceCheck?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.faceCheck(t)}}},[e._v("核验成功")]):e._e(),e._v(" "),3==t.row.faceCheck?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.faceCheck(t)}}},[e._v("核验失败")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"signTime",label:"点检时间",formatter:e.signTime}})],1),e._v(" "),a("el-pagination",{attrs:{background:"","page-sizes":[50,100,200,500],"page-size":50,layout:"total, sizes, prev, pager, next, jumper",total:e.total4},on:{"size-change":e.handleSizeChange1,"current-change":e.handleCurrentChange1}})],1)],1)],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:"人脸核验未通过详情",visible:e.dialogVisible3,width:"70%","before-close":e.handleClose,top:"3vh"},on:{"update:visible":function(t){e.dialogVisible3=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading5,expression:"loading5"}],staticStyle:{width:"100%"},attrs:{data:e.tableData5,height:"800",border:""}},[a("el-table-column",{attrs:{width:"50",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+e.noFaceCanShu.page*e.noFaceCanShu.pageSize+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"eventCode",label:"点检任务编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"eventName",label:"点检任务名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deviceName",label:"点检设备名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"signTime",label:"点检时间",formatter:e.formattingTime}}),e._v(" "),a("el-table-column",{attrs:{label:"人脸核验状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.noFaceCheck(t)}}},[e._v("未通过")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"","page-sizes":[50,100,200,500],"page-size":50,layout:"total, sizes, prev, pager, next, jumper",total:e.total5},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:"人脸核验详情",visible:e.dialogVisible1,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible1=t}}},[1==e.PIM.status?a("div",{staticClass:"con"},[e._v("核验结果：通过")]):e._e(),e._v(" "),2==e.PIM.status?a("div",{staticClass:"con"},[e._v("核验结果：未通过")]):e._e(),e._v(" "),null==e.PIM.status?a("div",{staticClass:"con"},[e._v("核验结果：未人脸核验")]):e._e(),e._v(" "),a("div",{staticClass:"con"},[e._v("人工核验："+e._s(e.PIM.adminOperation))]),e._v(" "),a("div",{staticClass:"imgs"},[a("div",[e._v("\n          人员照片\n          "),a("el-image",{attrs:{src:e.PIM.src1}})],1),e._v(" "),a("div",[e._v("\n          核验照片\n          "),a("el-image",{attrs:{src:e.PIM.src}})],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible1=!1}}},[e._v("关 闭")]),e._v(" "),2==e.PIM.status?a("el-button",{attrs:{type:"primary"},on:{click:e.reset}},[e._v("重置为通过")]):e._e()],1)])],1)],1)},o=[],i=(a("7f7f"),a("ac6a"),a("96cf"),a("3b8d")),r=(a("a481"),a("bd86")),s=a("6403"),l=(a("06cd"),a("9702"));function c(e){return Object(l["a"])({url:"/rest/PCReport/updateUserFaceSign",method:"post",data:e})}function u(e){return Object(l["a"])({url:"/rest/PCReport/faceCheckNoPass",method:"post",data:e})}function p(e){return Object(l["a"])({url:"/rest/PCReport/getPCReportUser",method:"post",data:e})}function d(e){return Object(l["a"])({url:"/rest/PCReport/getEventDetailNoCompleteByUid",method:"post",data:e})}function h(e){return Object(l["a"])({url:"/rest/PCReport/getEventDetailCompleteByUid",method:"post",data:e})}function v(e){return Object(l["a"])({url:"/rest/PCReport/getDeviceNoCompleteByDetailId",method:"post",data:e})}function m(e){return Object(l["a"])({url:"/rest/PCReport/getFaceCheckDetail",method:"post",data:e})}var g=a("2887"),f=a("ca17"),b=a.n(f),_=(a("542c"),a("333d")),k={components:{Pagination:_["a"],Treeselect:b.a},data:function(){return Object(r["a"])({value:[new Date,new Date],value1:"",value2:"",options:[],departments:[],listQuery:{page:1,pageSize:50,uid:localStorage.getItem("uid")},faceDetails:{page:0,pageSize:50,uid:""},checkNoEvent:{uid:localStorage.getItem("uids"),page:0,pageSize:50},spotDetails:{page:0,pageSize:50,status:"1"},spotDetails1:{page:0,pageSize:50,status:"2"},faceHeYanDetails:{uid:localStorage.getItem("uid")},updateFace:{uid:localStorage.getItem("uid")},noFaceCanShu:{page:0,pageSize:50,startTime:"",endTime:""},noFaceCheck1:{uid:localStorage.getItem("uid")},PIM:{},spotDetail:{},loading:!0,loading1:!0,loading2:!0,loading3:!0,loading4:!0,loading5:!0,tableData:[],tableData1:[],tableData2:[],tableData3:[],tableData4:[],tableData5:[],total:0,total1:0,total2:0,total3:0,total4:0,total5:0,dialogVisible:!1,dialogVisible1:!1,dialogVisible2:!1,dialogVisible3:!1},"PIM",{src:"",src1:"",adminOperation:""})},mounted:function(){this.time([new Date,new Date]),1==localStorage.getItem("uid")?this.getList():this.getCompany(),this.checkSpotUser()},methods:{signTime:function(e,t){if(null==e.signTime)return"-";var a=new Date(e.signTime),n=a.getFullYear(),o=this.p(a.getMonth()+1),i=this.p(a.getDate()),r=this.p(a.getHours()),s=this.p(a.getMinutes()),l=this.p(a.getSeconds());return n+"-"+o+"-"+i+" "+r+":"+s+":"+l},parameter:function(e,t){return null==e.itemStr?"-":e.itemStr.replace(/,/g,";\n")},result:function(e,t){return"0"==e.checkResult?"正常":"-"},faceCheck:function(e){console.log(e),this.dialogVisible1=!0,this.faceHeYanDetails.deviceId=e.row.deviceId,this.faceHeYanDetails.taskDetailId=e.row.detailId,this.updateFace.patrolPointId=e.row.deviceId,this.updateFace.taskDetailId=e.row.detailId,this.faceHeYan(this.faceHeYanDetails)},pr:function(e,t){return console.log(e),e.deviceCompletePR+"%"},pr1:function(e,t){return console.log(e),e.eventCompletePR+"%"},reset:function(){this.faceReset(this.updateFace)},noFace:function(e){this.dialogVisible3=!0,console.log(e),this.noFaceCanShu.uid=e.row.uid,this.noFaceCheck1.executeUid=e.row.uid,this.updateFace.executeUid=e.row.uid,this.noFaceDetails(this.noFaceCanShu)},noFaceCheck:function(e){this.dialogVisible1=!0,console.log(e),this.noFaceCheck1.deviceId=e.row.deviceId,this.noFaceCheck1.taskDetailId=e.row.taskDetailId,this.updateFace.deviceId=e.row.deviceId,this.updateFace.taskDetailId=e.row.taskDetailId,this.faceHeYan(this.noFaceCheck1)},noFaceDetails:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading5=!0,e.prev=1,e.next=4,u(t);case 4:a=e.sent,console.log(a),this.loading5=!1,this.total5=a.count,this.tableData5=a.data,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));function t(t){return e.apply(this,arguments)}return t}(),faceReset:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c(t);case 3:a=e.sent,console.log(a),this.dialogVisible1=!1,this.faceHeYan(this.faceHeYanDetails),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}(),faceHeYan:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m(t);case 3:a=e.sent,this.PIM.src=a.data.nowBase64,this.PIM.src1=a.data.oldBase64,this.PIM.adminOperation=a.data.adminOperation,this.PIM.status=a.data.status,n=a.data.nowBase64.substr(a.data.nowBase64.lastIndexOf("/")),this.PIM.src="http://47.100.240.228:8953/rest/PCReport/img"+n,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));function t(t){return e.apply(this,arguments)}return t}(),formattingTime:function(e,t){var a=new Date(e.signTime),n=a.getFullYear(),o=this.p(a.getMonth()+1),i=this.p(a.getDate()),r=this.p(a.getHours()),s=this.p(a.getMinutes()),l=this.p(a.getSeconds());return n+"-"+o+"-"+i+" "+r+":"+s+":"+l},checkSpotUser:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p(this.listQuery);case 3:t=e.sent,console.log(t),this.tableData=t.data,this.total=t.count,this.loading=!1,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}(),eventDetailNo:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d(this.checkNoEvent);case 3:t=e.sent,console.log(t),this.tableData1=t.data,this.total1=t.count,this.loading1=!1,this.tableData1.forEach((function(e){a.$set(e,"deviceIdsNoCount",e.deviceIdsCount-e.deviceIdsEdCount)})),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(){return e.apply(this,arguments)}return t}(),eventDetailComplete:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h(this.checkNoEvent);case 3:t=e.sent,console.log(t),this.tableData2=t.data,this.total2=t.count,this.loading2=!1,this.tableData2.forEach((function(e){a.$set(e,"deviceIdsNoCount",e.deviceIdsCount-e.deviceIdsEdCount)})),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(){return e.apply(this,arguments)}return t}(),handleSizeChange:function(e){this.checkNoEvent.uid=localStorage.getItem("uids"),this.checkNoEvent.pageSize=e,this.eventDetailNo()},handleCurrentChange:function(e){this.checkNoEvent.uid=localStorage.getItem("uids"),this.checkNoEvent.pageSize=50,this.checkNoEvent.page=e-1,this.eventDetailNo()},handleSizeChange1:function(e){this.checkNoEvent.uid=localStorage.getItem("uids"),this.checkNoEvent.pageSize=e,this.eventDetailComplete()},handleCurrentChange1:function(e){this.checkNoEvent.uid=localStorage.getItem("uids"),this.checkNoEvent.pageSize=50,this.checkNoEvent.page=e-1,this.eventDetailComplete()},order:function(e){this.dialogVisible=!0,console.log(e),localStorage.setItem("uids",e.row.uid),this.checkNoEvent.uid=e.row.uid,this.faceHeYanDetails.executeUid=e.row.uid,this.updateFace.executeUid=e.row.uid,this.PIM.userName=e.row.userName,this.PIM.companyName=e.row.companyName,this.PIM.deptName=e.row.deptName,this.spotDetail.userName=e.row.userName,this.spotDetail.companyName=e.row.companyName,this.spotDetail.deptName=e.row.deptName,this.eventDetailNo(),this.eventDetailComplete()},noEvent:function(e){this.dialogVisible2=!0,console.log(e),this.spotDetail.eventCode=e.row.detailCode,this.spotDetail.eventName=e.row.taskName,this.spotDetails.detailId=e.row.id,this.spotDetails1.detailId=e.row.id,this.noSpotList(this.spotDetails),this.completeSpotList(this.spotDetails1)},completeSpot:function(e){this.dialogVisible2=!0,console.log(e),this.spotDetail.eventCode=e.row.detailCode,this.spotDetail.eventName=e.row.taskName,this.spotDetails.detailId=e.row.id,this.spotDetails1.detailId=e.row.id,this.noSpotList(this.spotDetails),this.completeSpotList(this.spotDetails1)},noSpotList:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v(t);case 3:a=e.sent,console.log(a),this.loading3=!1,this.tableData3=a.data,this.total3=a.count,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(t){return e.apply(this,arguments)}return t}(),completeSpotList:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v(t);case 3:a=e.sent,console.log(a),this.loading4=!1,this.tableData4=a.data,this.total4=a.count,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(t){return e.apply(this,arguments)}return t}(),getList:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s["f"])(localStorage.getItem("uid"));case 3:t=e.sent,console.log(t),this.options=t.result,this.options.forEach((function(e){a.$set(e,"label",e.name),a.$set(e,"value",e.id)})),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}(),getCompany:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s["b"])(localStorage.getItem("uid"));case 3:t=e.sent,console.log(t),this.options.push(t.result),this.options.forEach((function(e){a.$set(e,"label",e.name),a.$set(e,"value",e.id)})),this.value1=t.result.id,this.listQuery.companyId=t.result.id,this.getSubDepartments(t.result.id),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));function t(){return e.apply(this,arguments)}return t}(),getSubDepartments:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(g["e"])(t);case 2:a=e.sent,n=a.result,console.log(a),this.diGuiTree(n),this.departments=n;case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),normalizer:function(e){return{id:e.id,label:e.name,children:e.childrens}},diGuiTree:function(e){var t=this;e.forEach((function(e){""===e.childrens||void 0===e.childrens||null===e.childrens?delete e.childrens:t.diGuiTree(e.childrens)}))},shu:function(e){console.log(e),this.listQuery.deptId=e,console.log(this.listQuery)},p:function(e){return e<10?"0"+e:e},time:function(e){console.log(e);var t=new Date(e[0]),a=t.getFullYear(),n=this.p(t.getMonth()+1),o=this.p(t.getDate());this.listQuery.startDate=a+"-"+n+"-"+o+" 00:00:00",this.noFaceCanShu.startTime=a+"-"+n+"-"+o+" 00:00:00";var i=new Date(e[1]),r=i.getFullYear(),s=this.p(i.getMonth()+1),l=this.p(i.getDate());this.listQuery.endDate=r+"-"+s+"-"+l+" 23:59:59",this.noFaceCanShu.endTime=r+"-"+s+"-"+l+" 23:59:59",this.PIM.time=a+"-"+n+"-"+o+"~"+r+"-"+s+"-"+l,this.spotDetail.time=a+"-"+n+"-"+o+"~"+r+"-"+s+"-"+l},time1:function(e){console.log(e);var t=new Date(e[0]),a=t.getFullYear(),n=this.p(t.getMonth()+1),o=this.p(t.getDate());this.listQuery.startDate=a+"-"+n+"-"+o+" 00:00:00",this.noFaceCanShu.startTime=a+"-"+n+"-"+o+" 00:00:00";var i=new Date(e[1]),r=i.getFullYear(),s=this.p(i.getMonth()+1),l=this.p(i.getDate());this.listQuery.endDate=r+"-"+s+"-"+l+" 23:59:59",this.noFaceCanShu.endTime=r+"-"+s+"-"+l+" 23:59:59",this.PIM.time=a+"-"+n+"-"+o+"~"+r+"-"+s+"-"+l,this.spotDetail.time=a+"-"+n+"-"+o+"~"+r+"-"+s+"-"+l},company:function(e){this.listQuery.companyId=e},check:function(){console.log("asd"),this.listQuery.userName=this.value2,this.checkSpotUser()},excel:function(){console.log("asdsadasdad")},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))}}},w=k,y=(a("1a9e"),a("2877")),C=Object(y["a"])(w,n,o,!1,null,"ec5dd804",null);t["default"]=C.exports}}]);