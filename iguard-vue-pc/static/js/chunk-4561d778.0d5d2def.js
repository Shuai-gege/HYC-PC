(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4561d778"],{"09f4":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),Math.easeInOutQuad=function(e,t,n,r){return e/=r/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)};var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function a(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function i(e,t,n){var i=o(),s=e-i,l=20,u=0;t="undefined"===typeof t?500:t;var c=function e(){u+=l;var o=Math.easeInOutQuad(u,i,s,t);a(o),u<t?r(e):n&&"function"===typeof n&&n()};c()}},2887:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"e",(function(){return u}));var r=n("b775");function a(e){return Object(r["a"])({url:"/rest/tbEventReport/getPCReportEventByPage",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/rest/department/subCompanyList",method:"get",params:{uid:e}})}function i(e){return Object(r["a"])({url:"/rest/department/subDeptByDeptId",method:"get",params:{deptId:e}})}function s(e){return Object(r["a"])({url:"/rest/department/getCompanyByUid",method:"get",params:{uid:e}})}function l(e){return Object(r["a"])({url:"/rest/tbEventTypeConfig/list",method:"post",data:e})}function u(e){return Object(r["a"])({url:"/rest/department/subDeptByDeptId",method:"get",params:{deptId:e}})}},"3f5e":function(e,t,n){"use strict";var r=n("a0c1"),a=n.n(r);a.a},"542c":function(e,t,n){},"79d1":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-row",{attrs:{gutter:24}},[n("el-col",{attrs:{span:6}},[n("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"~","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},on:{change:e.time},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),e._v(" "),n("el-col",{attrs:{span:3}},[1==e.listQuery.uid?n("el-select",{attrs:{placeholder:"企业"},on:{change:e.company},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}},e._l(e.options,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):n("el-select",{attrs:{placeholder:"企业"},on:{change:e.company1},model:{value:e.value111,callback:function(t){e.value111=t},expression:"value111"}},e._l(e.options111,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),n("el-col",{attrs:{span:5}},[n("treeselect",{attrs:{options:e.departments,normalizer:e.normalizer,placeholder:"选择部门"},on:{input:e.shu},model:{value:e.listQuery.deptid,callback:function(t){e.$set(e.listQuery,"deptid",t)},expression:"listQuery.deptid"}})],1),e._v(" "),n("el-col",{attrs:{span:3}},[n("el-input",{attrs:{placeholder:"姓名"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1),e._v(" "),n("el-col",{attrs:{span:3}},[n("el-button",{attrs:{type:"primary"},on:{click:e.query}},[e._v("查询")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.excel}},[e._v("导出")])],1)],1),e._v(" "),n("el-divider"),e._v(" "),n("div",[n("el-row",[n("el-col",{attrs:{span:23}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"600",border:""}},[n("el-table-column",{attrs:{width:"50",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.$index+(e.listQuery.page-1)*e.listQuery.limit+1))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"userName",label:"姓名"}}),e._v(" "),n("el-table-column",{attrs:{prop:"deptName",label:"部门"}}),e._v(" "),n("el-table-column",{attrs:{prop:"reportEvents",label:"报事数",sortable:!0,"sort-method":e.paiXu},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.order(t)}}},[e._v(e._s(t.row.reportEvents))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"completeEventsTotal",label:"完工数(总)",sortable:!0,"sort-method":e.paiXu1},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.order1(t)}}},[e._v(e._s(t.row.completeEventsTotal))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"completeEventSelf",label:"完工数(自行处理)",sortable:!0,"sort-method":e.paiXu2},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.order2(t)}}},[e._v(e._s(t.row.completeEventSelf))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"completeEventsReport",label:"完工数(报事事件)",sortable:!0,"sort-method":e.paiXu3},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.order3(t)}}},[e._v(e._s(t.row.completeEventsReport))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"completeEventsRC",label:"完工数(日常事件)",sortable:!0,"sort-method":e.paiXu4},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.order4(t)}}},[e._v(e._s(t.row.completeEventsRC))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"allocationAndChecks",label:"分配&验收数",sortable:!0,"sort-method":e.paiXu5},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.order5(t)}}},[e._v(e._s(t.row.allocationAndChecks))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"invalidEvents",label:"无效上报处理数",sortable:!0,"sort-method":e.paiXu6},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.order6(t)}}},[e._v(e._s(t.row.invalidEvents))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"scoreTotal",label:"评分总值",sortable:!0,"sort-method":e.paiXu7}}),e._v(" "),n("el-table-column",{attrs:{prop:"scoreAvg",label:"评分均值",sortable:!0,"sort-method":e.paiXu8}})],1),e._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}})],1)],1)],1)],1)},a=[],o=(n("7f7f"),n("ac6a"),n("96cf"),n("3b8d")),i=n("bd86"),s=n("2887"),l=n("333d"),u=n("ca17"),c=n.n(u),p=(n("542c"),{uid:localStorage.getItem("uid"),startTime:"",endTime:"",companyId:"",eventTypeId:"",deptId:"",userName:"",page:1,limit:50}),d={components:{Pagination:l["a"],Treeselect:c.a},name:"incident",data:function(){var e;return e={value:[(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+this.p((new Date).getDate()),(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+this.p((new Date).getDate())],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-6048e5),e.$emit("pick",[n,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e6),e.$emit("pick",[n,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-7776e6),e.$emit("pick",[n,t])}}]},value2:"",value3:"",value4:"",total:0,deptId:"",options:[],options1:[],options4:[],input:"",tableData:[],listQuery:Object.assign({},p),startTime:"",endTime:"",companyId:""},Object(i["a"])(e,"deptId",""),Object(i["a"])(e,"options111",[]),Object(i["a"])(e,"value111",""),Object(i["a"])(e,"loading",!0),Object(i["a"])(e,"departments",[]),Object(i["a"])(e,"daoChu",!1),e},mounted:function(){1==localStorage.getItem("uid")?this.companyList():this.getCompany(),this.getList(),this.getTypeEvent(),this.listQuery.startTime=(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+this.p((new Date).getDate()),this.startTime=(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+this.p((new Date).getDate()),this.listQuery.endTime=(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+this.p((new Date).getDate()),this.endTime=(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+this.p((new Date).getDate())},methods:{shu:function(e){console.log(e),this.listQuery.deptId=e,console.log(this.listQuery)},getSubDepartments:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["e"])(t);case 2:n=e.sent,r=n.result,console.log(n),this.diGuiTree(r),this.departments=r;case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),diGuiTree:function(e){var t=this;e.forEach((function(e){""===e.childrens||void 0===e.childrens||null===e.childrens?delete e.childrens:t.diGuiTree(e.childrens)}))},normalizer:function(e){return{id:e.id,label:e.name,children:e.childrens}},paiXu:function(e,t){return e.reportEvents-t.reportEvents},paiXu1:function(e,t){return e.completeEventsTotal-t.completeEventsTotal},paiXu2:function(e,t){return e.completeEventSelf-t.completeEventSelf},paiXu3:function(e,t){return e.completeEventsReport-t.completeEventsReport},paiXu4:function(e,t){return e.completeEventsRC-t.completeEventsRC},paiXu5:function(e,t){return e.allocationAndChecks-t.allocationAndChecks},paiXu6:function(e,t){return e.invalidEvents-t.invalidEvents},paiXu7:function(e,t){return e.scoreTotal-t.scoreTotal},paiXu8:function(e,t){return e.scoreAvg-t.scoreAvg},p:function(e){return e<10?"0"+e:e},time:function(e){if(null!=e){var t=new Date(e[0]),n=t.getFullYear(),r=this.p(t.getMonth()+1),a=this.p(t.getDate());this.listQuery.startTime=n+"-"+r+"-"+a,this.startTime=n+"-"+r+"-"+a;var o=new Date(e[1]),i=o.getFullYear(),s=this.p(o.getMonth()+1),l=this.p(o.getDate());this.listQuery.endTime=i+"-"+s+"-"+l,this.endTime=i+"-"+s+"-"+l}else this.listQuery.endTime="",this.listQuery.startTime=""},order:function(e){this.$router.push({name:"incidentOrder",params:{userName:e.row.userName,value10:"1",startTime:this.startTime,endTime:this.endTime,companyId:this.companyId,value8:"",value11:"1",deptId:this.deptId}})},order1:function(e){this.$router.push({name:"incidentOrder",params:{userName:e.row.userName,value10:"3",startTime:this.startTime,endTime:this.endTime,companyId:this.companyId,deptId:this.deptId,value11:"2",value8:"1"}})},order2:function(e){this.$router.push({name:"incidentOrder",params:{userName:e.row.userName,value10:"3",startTime:this.startTime,endTime:this.endTime,companyId:this.companyId,deptId:this.deptId,value11:"2",value8:"3"}})},order3:function(e){this.$router.push({name:"incidentOrder",params:{userName:e.row.userName,value10:"3",startTime:this.startTime,endTime:this.endTime,companyId:this.companyId,deptId:this.deptId,value11:"2",code:"BS",value8:"2"}})},order4:function(e){this.$router.push({name:"incidentOrder",params:{userName:e.row.userName,value10:"3",startTime:this.startTime,endTime:this.endTime,companyId:this.companyId,deptId:this.deptId,value11:"2",code:"RC",value8:"2"}})},order5:function(e){this.$router.push({name:"incidentOrder",params:{userName:e.row.userName,value10:"2",startTime:this.startTime,endTime:this.endTime,companyId:this.companyId,deptId:this.deptId,value11:"2",value8:"2"}})},order6:function(e){this.$router.push({name:"incidentOrder",params:{userName:e.row.userName,value10:"4",startTime:this.startTime,endTime:this.endTime,companyId:this.companyId,deptId:this.deptId,value11:"2",value8:"4"}})},getTypeEvent:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={uid:localStorage.getItem("uid")},e.prev=1,e.next=4,Object(s["b"])(t);case 4:n=e.sent,n.result.rows.forEach((function(e){r.options4.push(e),r.$set(e,"label",e.eventType),r.$set(e,"value",e.id)})),console.log(n),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));function t(){return e.apply(this,arguments)}return t}(),eventId:function(e){this.listQuery.eventTypeId=e},getList:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,console.log(this.listQuery),e.next=5,Object(s["c"])(this.listQuery);case 5:t=e.sent,console.log(t),this.total=t.result.records,this.tableData=t.result.rows,this.loading=!1,this.daoChu&&(Promise.resolve().then(function(){var e=n("8b02"),t=e.export_json_to_excel,a=["姓名","部门","报事数","完工数(总)","完工数(自行处理)","完工数(报事验收)","完工数(日常分配)","分配&验收","无效上报处理数","评分总值","评分均值"],o=["userName","deptName","reportEvents","completeEventsTotal","completeEventSelf","completeEventsReport","completeEventsRC","allocationAndChecks","invalidEvents","scoreTotal","scoreAvg"],i=r.tableData,s=r.formatJson(o,i);""!=r.startTime&&""!=r.endTime?t(a,s,"工维人员统计报表"+r.startTime+"~"+r.endTime):t(a,s,"工维人员统计报表"+(new Date).getFullYear()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getDate())}.bind(null,n)).catch(n.oe),this.daoChu=!1),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](1),console.log(e.t0);case 16:case"end":return e.stop()}}),e,this,[[1,13]])})));function t(){return e.apply(this,arguments)}return t}(),companyList:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s["d"])(localStorage.getItem("uid"));case 3:t=e.sent,console.log(t),this.options=t.result,this.options.forEach((function(e){n.$set(e,"label",e.name),n.$set(e,"value",e.id)})),console.log(t.result.id),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}(),company:function(e){console.log(e),this.deptId=e,this.listQuery.companyId=e,this.companyId=e,this.getSubDepartments(this.deptId)},company1:function(e){console.log(e),this.deptId=e,this.listQuery.companyId=e,this.getSubDepartments(this.deptId)},getCompany:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s["a"])(localStorage.getItem("uid"));case 3:t=e.sent,console.log(t),this.options111.push(t.result),this.options111.forEach((function(e){n.$set(e,"label",e.name),n.$set(e,"value",e.id)})),this.value111=t.result.id,this.listQuery.companyId=t.result.id,this.getSubDepartments(this.value111),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));function t(){return e.apply(this,arguments)}return t}(),query:function(){this.listQuery.userName=this.input,this.loading=!0,this.getList(),console.log(this.listQuery)},excel:function(e){this.$message({message:"数据量较大，请耐心等待！~",type:"warning"}),this.listQuery.limit=1e5,this.daoChu=!0,this.getList()},formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return t[e]}))}))}}},m=d,h=(n("3f5e"),n("2877")),v=Object(h["a"])(m,r,a,!1,null,"61484897",null);t["default"]=v.exports},a0c1:function(e,t,n){}}]);